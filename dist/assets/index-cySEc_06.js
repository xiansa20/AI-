(function(){const T=document.createElement("link").relList;if(T&&T.supports&&T.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))E(u);new MutationObserver(u=>{for(const i of u)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&E(n)}).observe(document,{childList:!0,subtree:!0});function l(u){const i={};return u.integrity&&(i.integrity=u.integrity),u.referrerPolicy&&(i.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?i.credentials="include":u.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function E(u){if(u.ep)return;u.ep=!0;const i=l(u);fetch(u.href,i)}})();const xt=[{id:"siliconflow",name:"ç¡…åŸºæµåŠ¨ (SiliconFlow)",url:"https://api.siliconflow.cn/v1/chat/completions",models:["Pro/Qwen/Qwen2.5-VL-7B-Instruct","deepseek-ai/deepseek-vl2"],getKeyUrl:"https://cloud.siliconflow.cn",docUrl:"https://docs.siliconflow.cn"},{id:"openai",name:"ChatGPT (OpenAI)",url:"https://api.openai.com/v1/chat/completions",models:["gpt-4o","gpt-4-turbo","gpt-4o-mini"],getKeyUrl:"https://platform.openai.com/api-keys",docUrl:"https://platform.openai.com/docs/models"},{id:"gemini",name:"Gemini (Google)",url:"https://generativelanguage.googleapis.com/v1beta/openai/chat/completions",models:["gemini-1.5-flash","gemini-1.5-pro","gemini-2.0-flash-exp"],getKeyUrl:"https://aistudio.google.com/app/apikey",docUrl:"https://ai.google.dev/gemini-api/docs/models/gemini"},{id:"zhipu",name:"æ™ºè°± AI (GLM)",url:"https://open.bigmodel.cn/api/paas/v4/chat/completions",models:["glm-4v","glm-4v-plus"],getKeyUrl:"https://open.bigmodel.cn",docUrl:"https://open.bigmodel.cn/dev/howuse/model"},{id:"qwen",name:"é€šä¹‰åƒé—® (Qwen)",url:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",models:["qwen-vl-max","qwen-vl-plus"],getKeyUrl:"https://bailian.console.aliyun.com",docUrl:"https://help.aliyun.com/zh/model-studio/getting-started/models"},{id:"volcano",name:"ç«å±±å¼•æ“Ž (Doubao)",url:"https://ark.cn-beijing.volces.com/api/v3/chat/completions",models:["Doubao-vision-pro-32k","Doubao-vision-lite-32k"],getKeyUrl:"https://console.volcengine.com/ark",docUrl:"https://www.volcengine.com/docs/82379/1099475"}];let Ot=JSON.parse(localStorage.getItem("fire_ai_configs"))||{},vt=localStorage.getItem("fire_ai_current_id")||"siliconflow",wt=vt;function ne(b){return new Promise(T=>{const l=new Image;l.onload=()=>{const E=document.createElement("canvas"),u=800;let i=l.width,n=l.height;(i>u||n>u)&&(i>n?(n*=u/i,i=u):(i*=u/n,n=u)),E.width=i,E.height=n,E.getContext("2d").drawImage(l,0,0,i,n),T(E.toDataURL("image/jpeg",.6))},l.src=b})}function Yt(){const b=document.getElementById("mainProviderSelect");b.innerHTML="",xt.forEach(T=>{const l=document.createElement("option");l.value=T.id,l.innerText=T.name,T.id===vt&&(l.selected=!0),b.appendChild(l)})}window.switchMainProvider=function(){vt=document.getElementById("mainProviderSelect").value,localStorage.setItem("fire_ai_current_id",vt)};Yt();window.openExternal=function(b,T){b.preventDefault(),window.open(T,"_blank")};window.togglePasswordVisibility=function(){const b=document.getElementById("aiKeyInput");b.type=b.type==="password"?"text":"password"};window.handleModelSelectChange=function(){const b=document.getElementById("aiModelSelect"),T=document.getElementById("aiModelInput");b.value==="custom"?(T.style.display="block",T.focus()):T.style.display="none"};window.openAISettings=function(){document.getElementById("aiModal").classList.add("active"),wt=vt,Gt(),Xt()};window.closeAISettings=function(){document.getElementById("aiModal").classList.remove("active")};window.saveAISettings=function(){const b=document.getElementById("aiKeyInput").value.trim(),T=document.getElementById("aiUrlInput").value.trim(),l=document.getElementById("aiModelSelect");let E=l.value==="custom"?document.getElementById("aiModelInput").value.trim():l.value;if(!b)return alert("API å¯†é’¥ä¸èƒ½ä¸ºç©º");if(!E)return alert("æ¨¡åž‹ä¸èƒ½ä¸ºç©º");Ot[wt]={key:b,url:T,model:E},localStorage.setItem("fire_ai_configs",JSON.stringify(Ot)),vt=wt,localStorage.setItem("fire_ai_current_id",vt),Yt(),closeAISettings(),alert(`é…ç½®å·²ä¿å­˜å¹¶åˆ‡æ¢åˆ°ï¼š${xt.find(u=>u.id===wt).name}`)};window.resetCurrentAIUrl=function(){const b=xt.find(T=>T.id===wt);document.getElementById("aiUrlInput").value=b.url};function Gt(){const b=document.getElementById("aiSidebar");b.innerHTML="",xt.forEach(T=>{const l=document.createElement("div");l.className=`ai-sidebar-item ${T.id===wt?"active":""}`,l.innerText=T.name,l.onclick=()=>ie(T.id),b.appendChild(l)})}function ie(b){wt=b,Gt(),Xt()}function Xt(){const b=xt.find(n=>n.id===wt),T=Ot[wt]||{};document.getElementById("aiConfigTitle").innerText=b.name,document.getElementById("aiGetKeyUrl").href=b.getKeyUrl,document.getElementById("aiModelListUrl").href=b.docUrl,document.getElementById("aiKeyInput").value=T.key||"",document.getElementById("aiUrlInput").value=T.url||b.url;const l=document.getElementById("aiModelSelect"),E=document.getElementById("aiModelInput");l.innerHTML="",b.models.length>0&&b.models.forEach(n=>{const e=document.createElement("option");e.value=n,e.innerText=n,l.appendChild(e)});const u=document.createElement("option");u.value="custom",u.innerText="âœï¸ æ‰‹åŠ¨è¾“å…¥...",l.appendChild(u);const i=T.model||b.models[0]||"";b.models.includes(i)?(l.value=i,E.style.display="none"):(l.value="custom",E.style.display="block",E.value=i)}async function ae(b,T){const l=xt.find(o=>o.id===vt),E=Ot[vt];if(!E||!E.key)throw confirm(`å°šæœªé…ç½® ${l.name} çš„ API Keyï¼Œæ˜¯å¦å‰å¾€é…ç½®ï¼Ÿ`)&&openAISettings(),new Error("Key æœªé…ç½®");const u=E.url||l.url,i=E.model||l.models[0],n=new AbortController,e=setTimeout(()=>n.abort(),2e4);try{const o=await ne(b),p=await fetch(u,{method:"POST",headers:{Authorization:`Bearer ${E.key}`,"Content-Type":"application/json"},body:JSON.stringify({model:i,messages:[{role:"user",content:[{type:"image_url",image_url:{url:o}},{type:"text",text:T}]}],max_tokens:100}),signal:n.signal});if(clearTimeout(e),p.status===401||p.status===403)throw new Error("401 Unauthorized: å¯†é’¥æ— æ•ˆ");if(!p.ok){const _=await p.text();throw new Error(`API Error ${p.status}: ${_}`)}return(await p.json()).choices[0].message.content}catch(o){throw clearTimeout(e),o}}let at=[];const Ft=document.getElementById("contentArea"),jt=document.getElementById("grid"),ht=document.getElementById("saveBtn"),se=document.getElementById("stats-text");let Pt=!1,_t=!1;window.toggleTheme=function(){document.body.classList.toggle("dark-mode"),localStorage.setItem("theme",document.body.classList.contains("dark-mode")?"dark":"light")};window.handleFiles=function(b){Array.from(b).forEach(T=>{const l=T.name.toLowerCase();if(!T.type.startsWith("image/")&&!l.endsWith(".nef")&&!l.endsWith(".cr2")&&!l.endsWith(".arw"))return;const E=window.electronAPI.getFilePath(T);if(!at.some(u=>u.path===E))if(l.endsWith(".nef")||l.endsWith(".cr2")||l.endsWith(".arw"))window.electronAPI.convertRaw(E).then(u=>{const i={id:Date.now()+Math.random().toString(36),file:T,path:E,src:u,originalSize:T.size,originalW:0,originalH:0,processedBlob:null,selected:!0,aiName:null},n=new Image;n.onload=()=>{i.originalW=n.width,i.originalH=n.height,at.push(i),renderCard(i),processImage(i),updateUIState()},n.src=u}).catch(u=>console.error("RAW load error",u));else{const u=new FileReader;u.onload=i=>{const n=new Image;n.src=i.target.result,n.onload=()=>{const e={id:Date.now()+Math.random().toString(36),file:T,path:E,src:i.target.result,originalSize:T.size,originalW:n.width,originalH:n.height,processedBlob:null,selected:!0,aiName:null};at.push(e),renderCard(e),processImage(e),updateUIState()}},u.readAsDataURL(T)}})};async function oe(b,T,l){const E=[],u=[];for(const i of T){if(_t)break;const n=Promise.resolve().then(()=>l(i));if(E.push(n),b<=T.length){const e=n.then(()=>u.splice(u.indexOf(e),1));u.push(e),u.length>=b&&await Promise.race(u)}}return Promise.all(E)}window.handleAiRename=async function(){const b=document.getElementById("btnAiRename");if(Pt){_t=!0,b.innerText="â›”ï¸ å·²è¯·æ±‚åœæ­¢...";return}const T=at.filter(i=>i.selected);if(T.length===0)return alert("è¯·å…ˆé€‰æ‹©å›¾ç‰‡");Pt=!0,_t=!1;const l="âœ¨ æ™ºèƒ½å‘½å";b.classList.add("stop-mode"),b.innerText=`ðŸ›‘ åœæ­¢å¤„ç† (0/${T.length})`;let E=0;const u='è¯·åˆ†æžå›¾ç‰‡ï¼Œä¸¥æ ¼ä»Žä»¥ä¸‹åˆ†ç±»ä¸­é€‰æ‹©ä¸€ä¸ªï¼š[é£Žæ™¯],[ç”·],[å¥³],[äººç‰©],[åŠ¨ç‰©],[è¡¨æƒ…åŒ…],[æ–‡å­—],[ç‰©å“]ã€‚è§„åˆ™ï¼š1. åªæœ‰ä¸€ä¸ªç”·æ€§->[ç”·]ã€‚åªæœ‰ä¸€ä¸ªå¥³æ€§->[å¥³]ã€‚2. è¶…è¿‡ä¸€ä¸ªäºº->[äººç‰©]ã€‚3. ç¾Žé£Ÿ/é£Ÿç‰©->[ç‰©å“]ã€‚å»ºç­‘/åŸŽå¸‚->[é£Žæ™¯]ã€‚4. æè¿°å†…å®¹å¿…é¡»æŽ§åˆ¶åœ¨10ä¸ªå­—ä»¥å†…ï¼Œä¸è¦ç”¨æˆè¯­ã€‚5. è¿”å›žæ ¼å¼å¿…é¡»æ˜¯ï¼š"[åˆ†ç±»]æè¿°å†…å®¹"ã€‚';try{await oe(2,T,async i=>{if(_t)return;const n=document.getElementById(`name-${i.id}`);n&&(n.style.opacity="0.5");try{let o=(await ae(i.src,u)).trim().replace(/[^\u4e00-\u9fa5a-zA-Z0-9\[\]]/g,"");const p=o.match(/(\[.*?\])(.*)/);p&&p[2].length>10?o=p[1]+p[2].substring(0,10):o.length>15&&(o=o.substring(0,15)),o.includes("[")||(o="[ç‰©å“]"+o),o&&(i.aiName=o,n&&(n.innerText=o,n.className="filename ai-renamed",n.title=`AIå‘½å: ${o}`,n.classList.remove("ai-error"))),await new Promise(v=>setTimeout(v,1e3))}catch(e){if(console.error(e),e.message==="ABORT_NO_KEY"){_t=!0;return}n&&(n.innerText="âŒ å¤±è´¥ (ç‚¹å‡»é‡è¯•)",n.classList.add("ai-error")),(e.message.includes("401")||e.message.includes("Unauthorized"))&&(_t=!0,window._hasAlerted401||(alert("API Key æ— æ•ˆï¼Œä»»åŠ¡å·²åœæ­¢ã€‚"),window._hasAlerted401=!0,setTimeout(()=>window._hasAlerted401=!1,5e3)))}finally{n&&(n.style.opacity="1"),E++,_t||(b.innerText=`ðŸ›‘ åœæ­¢å¤„ç† (${E}/${T.length})`)}})}catch(i){_t||alert(`AI é”™è¯¯: ${i.message}`)}finally{Pt=!1,_t=!1,b.classList.remove("stop-mode"),b.innerText=l}};window.handleAiOptimize=function(){document.getElementById("quality").value=70,document.getElementById("qVal").innerText="70%",document.getElementById("scale").value=70,document.getElementById("sVal").innerText="70%",Dt()};function le(){const b=Ft,T=document.getElementById("selectionBox");let l=!1,E,u,i;b.addEventListener("mousedown",n=>{if(n.target.closest(".card")||n.target===T||n.button!==0)return;l=!0;const e=b.getBoundingClientRect();E=n.clientX-e.left+b.scrollLeft,u=n.clientY-e.top+b.scrollTop,T.style.width="0px",T.style.height="0px",T.style.left=E+"px",T.style.top=u+"px",T.style.display="block"}),window.addEventListener("mousemove",n=>{if(!l)return;const e=b.getBoundingClientRect(),o=n.clientX-e.left+b.scrollLeft,p=n.clientY-e.top+b.scrollTop,v=Math.abs(o-E),_=Math.abs(p-u),w=Math.min(o,E),s=Math.min(p,u);T.style.width=v+"px",T.style.height=_+"px",T.style.left=w+"px",T.style.top=s+"px",clearInterval(i);const m=15,a=50;n.clientY<e.top+a?i=setInterval(()=>{b.scrollTop-=m},16):n.clientY>e.bottom-a&&(i=setInterval(()=>{b.scrollTop+=m},16))}),window.addEventListener("mouseup",n=>{if(!l)return;l=!1,T.style.display="none",clearInterval(i);const e={left:parseInt(T.style.left),top:parseInt(T.style.top),right:parseInt(T.style.left)+parseInt(T.style.width),bottom:parseInt(T.style.top)+parseInt(T.style.height)};e.right-e.left<5&&e.bottom-e.top<5||at.forEach(o=>{const p=document.getElementById(`card-${o.id}`);if(p){const v=p.getBoundingClientRect(),_=b.getBoundingClientRect(),w={left:v.left-_.left+b.scrollLeft,top:v.top-_.top+b.scrollTop,right:v.right-_.left+b.scrollLeft,bottom:v.bottom-_.top+b.scrollTop};!(e.right<w.left||e.left>w.right||e.bottom<w.top||e.top>w.bottom)&&toggleItemSelection(o.id)}})})}le();window.renderCard=function(b){const T=document.createElement("div");T.className="card selected",T.id=`card-${b.id}`,T.onclick=()=>toggleItemSelection(b.id),T.ondblclick=u=>{u.stopPropagation(),openPreview(b)};const l=b.aiName||b.file.name,E=b.aiName?"filename ai-renamed":"filename";T.innerHTML=`<div class="check-circle"></div><div class="card-img-box"><img src="${b.src}"></div><div class="card-info"><div class="filename-row"><div class="${E}" title="${l}" id="name-${b.id}">${l}</div></div><div class="stat-row"><span class="stat-label">å°ºå¯¸</span><div class="stat-val-group"><span class="stat-old">${b.originalW}Ã—${b.originalH}</span><span class="stat-arrow">â†’</span><span class="stat-new" id="res-${b.id}">...</span></div></div><div class="stat-row"><span class="stat-label">ä½“ç§¯</span><div class="stat-val-group"><span class="stat-old">${Qt(b.originalSize)}</span><span class="stat-arrow">â†’</span><span class="stat-new" id="size-${b.id}">...</span></div></div></div>`,jt.appendChild(T)};let At=null,yt=1,bt=0,kt=0,Mt=!1,qt,Vt;window.openPreview=function(b){if(!b.processedBlob)return;At=b.id;const T=document.getElementById("previewModal"),l=document.getElementById("previewImg");yt=1,bt=0,kt=0,Rt(),l.src=URL.createObjectURL(b.processedBlob),Jt(b),T.classList.add("active")};window.closePreview=function(){document.getElementById("previewModal").classList.remove("active"),At=null};function Jt(b){const T=document.getElementById("previewInfo"),l=document.getElementById(`size-${b.id}`).innerText;T.innerText=`${b.aiName||b.file.name} (${l})`}function Rt(){const b=document.getElementById("previewImg");b.style.transform=`translate(${bt}px, ${kt}px) scale(${yt})`}document.getElementById("previewModal").addEventListener("wheel",b=>{b.preventDefault();const T=document.getElementById("previewImg");if(b.ctrlKey)yt=Math.min(Math.max(.1,yt*(1-b.deltaY*.01)),8),Rt();else{T.getBoundingClientRect();const l=1-b.deltaY*.002,E=Math.min(Math.max(.1,yt*l),8);if(Math.abs(b.deltaY)>0){const u=E/yt,i=window.innerWidth/2,n=window.innerHeight/2,e=b.clientX-i,o=b.clientY-n;bt=e-(e-bt)*u,kt=o-(o-kt)*u,yt=E,Rt()}}},{passive:!1});const Nt=document.getElementById("previewContainer");Nt.addEventListener("mousedown",b=>{Mt=!0,qt=b.clientX-bt,Vt=b.clientY-kt,Nt.style.cursor="grabbing"});window.addEventListener("mousemove",b=>{Mt&&(b.preventDefault(),bt=b.clientX-qt,kt=b.clientY-Vt,Rt())});window.addEventListener("mouseup",()=>{Mt=!1,Nt.style.cursor="grab"});document.addEventListener("keydown",b=>{const l=document.getElementById("previewModal").classList.contains("active"),E=at.filter(u=>u.selected);if(b.code==="Space"){b.preventDefault(),l?closePreview():E.length>0&&openPreview(E[0]);return}if(l&&(b.code==="Escape"&&closePreview(),At)){const u=at.findIndex(i=>i.id===At);if(u!==-1){if(b.code==="ArrowRight"||b.code==="ArrowDown"){b.preventDefault();const i=at[u+1];i&&openPreview(i)}if(b.code==="ArrowLeft"||b.code==="ArrowUp"){b.preventDefault();const i=at[u-1];i&&openPreview(i)}}}});document.getElementById("previewModal").addEventListener("dblclick",b=>{closePreview()});window.processImage=function(b,T=null,l=null){return new Promise(E=>{const u=new Image;u.src=b.src,u.onload=()=>{const i=document.createElement("canvas"),e=(l!==null?l:document.getElementById("scale").value)/100,o=Math.round(u.width*e),p=Math.round(u.height*e);i.width=o,i.height=p;const v=i.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,o,p),v.drawImage(u,0,0,o,p);const w=(T!==null?T:document.getElementById("quality").value)/100;let s=document.getElementById("formatSelect").value;s==="original"&&(b.file.name.toLowerCase().endsWith(".png")?s="image/png":b.file.name.toLowerCase().endsWith(".webp")?s="image/webp":s="image/jpeg"),i.toBlob(m=>{b.processedBlob=m,b.targetType=s;const a=document.getElementById(`size-${b.id}`);a&&(a.innerText=Qt(m.size),a.className=m.size<b.originalSize?"stat-new better":"stat-new worse");const f=document.getElementById(`res-${b.id}`);f&&(f.innerText=`${o}Ã—${p}`),At===b.id&&(document.getElementById("previewImg").src=URL.createObjectURL(m),Jt(b)),E()},s,w)}})};function $t(b){const T=b.includes("\\")?"\\":"/";return b.substring(0,b.lastIndexOf(T))}function Ht(b){const T=document.getElementById("toast");T.innerText=b,T.classList.add("active"),setTimeout(()=>T.classList.remove("active"),2500)}window.saveAll=async function(){const b=at.filter(n=>n.selected&&n.processedBlob);if(!b.length)return;if(document.body.classList.contains("is-web")){ht.innerText="æ­£åœ¨æ‰“åŒ…...",ht.disabled=!0;const n=[],e=document.getElementById("prefixStr").value||"",o=document.getElementById("suffixStr").value||"";for(const p of b){let v="jpg";p.targetType.includes("png")&&(v="png"),p.targetType.includes("webp")&&(v="webp");const _=p.aiName||p.file.name.substring(0,p.file.name.lastIndexOf("."))||p.file.name,w=`${e}${_}${o}.${v}`;n.push({name:w,buffer:p.processedBlob})}await window.electronAPI.saveZip(n),Ht(`å·²ä¸‹è½½ ${n.length} å¼ å›¾ç‰‡ (ZIPåŽ‹ç¼©åŒ…)`),ht.innerText="å®Œæˆ",setTimeout(()=>{ht.disabled=!1,ht.innerText=`ä¿å­˜ (${b.length})`},2e3);return}const l=document.querySelector('input[name="saveMode"]:checked').value,E=document.getElementById("prefixStr").value||"",u=document.getElementById("suffixStr").value||"";let i=null;if(!(l==="new"&&(i=await window.electronAPI.selectFolder(),!i))){if(l==="original_dir"){let n=!1;for(const e of b){let o="jpg";e.targetType.includes("png")&&(o="png"),e.targetType.includes("webp")&&(o="webp");const p=e.aiName||e.file.name.substring(0,e.file.name.lastIndexOf("."))||e.file.name,v=`${E}${p}${u}.${o}`,_=e.path.includes("\\")?"\\":"/";if($t(e.path)+_+v===e.path){n=!0;break}}if(n&&!await window.electronAPI.confirmOverwrite())return}ht.innerText="å¤„ç†ä¸­...",ht.disabled=!0;for(const n of b){const e=new FileReader;e.readAsDataURL(n.processedBlob),await new Promise(o=>{e.onloadend=async()=>{let p="jpg";n.targetType.includes("png")&&(p="png"),n.targetType.includes("webp")&&(p="webp");const v=n.aiName||n.file.name.substring(0,n.file.name.lastIndexOf("."))||n.file.name,_=`${E}${v}${u}.${p}`;let w=i;l==="original_dir"&&(w=$t(n.path)),await window.electronAPI.saveImage({bufferData:e.result,newFileName:_,targetFolder:w}),o()}})}Ht(`æˆåŠŸä¿å­˜ ${b.length} å¼ å›¾ç‰‡`),ht.innerText="å®Œæˆ",b.forEach(n=>{n.selected=!1;const e=document.getElementById(`card-${n.id}`);e&&e.classList.remove("selected")}),updateUIState(),setTimeout(()=>{ht.innerText="ä¿å­˜å›¾ç‰‡"},1e3)}};window.deleteSelected=function(){const b=at.filter(T=>T.selected);if(b.length===0)return alert("è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„å›¾ç‰‡");confirm(`ç¡®å®šè¦ç§»é™¤é€‰ä¸­çš„ ${b.length} å¼ å›¾ç‰‡å—ï¼Ÿ`)&&(at=at.filter(T=>!T.selected),jt.innerHTML="",at.forEach(renderCard),updateUIState())};window.updateUIState=function(){at.length>0?Ft.classList.add("has-files"):Ft.classList.remove("has-files");const b=at.filter(T=>T.selected).length;se.innerText=`å·²é€‰ ${b} / ${at.length}`,ht.disabled=b===0,ht.innerText=b>0?`ä¿å­˜ (${b})`:"ä¿å­˜å›¾ç‰‡"};window.toggleItemSelection=function(b){const T=at.find(l=>l.id===b);if(T){T.selected=!T.selected;const l=document.getElementById(`card-${T.id}`);T.selected?l.classList.add("selected"):l.classList.remove("selected"),updateUIState()}};window.toggleSelectAll=function(){const b=at.every(T=>T.selected);at.forEach(T=>{T.selected=!b;const l=document.getElementById(`card-${T.id}`);T.selected?l.classList.add("selected"):l.classList.remove("selected")}),updateUIState()};window.clearAll=function(){confirm("æ¸…ç©ºåˆ—è¡¨?")&&(at=[],jt.innerHTML="",updateUIState())};const Dt=ce(()=>at.forEach(b=>processImage(b)),300);document.getElementById("quality").oninput=b=>{document.getElementById("qVal").innerText=b.target.value+"%",Dt()};document.getElementById("scale").oninput=b=>{document.getElementById("sVal").innerText=b.target.value+"%",Dt()};document.getElementById("formatSelect").onchange=()=>Dt();document.addEventListener("dragenter",b=>{b.preventDefault()},!1);document.addEventListener("dragover",b=>{b.preventDefault(),b.dataTransfer.dropEffect="copy"},!1);document.addEventListener("dragleave",b=>{b.preventDefault()},!1);document.addEventListener("drop",b=>{b.preventDefault(),b.dataTransfer.files.length&&handleFiles(b.dataTransfer.files)},!1);localStorage.getItem("theme")==="dark"&&document.body.classList.add("dark-mode");function Qt(b){if(b===0)return"0 B";const T=1024,l=["B","KB","MB"],E=Math.floor(Math.log(b)/Math.log(T));return(b/Math.pow(T,E)).toFixed(1)+" "+l[E]}function ce(b,T){let l;return(...E)=>{clearTimeout(l),l=setTimeout(()=>b(...E),T)}}var Bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function de(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}function Tt(b){throw new Error('Could not dynamically require "'+b+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ut={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Kt;function ue(){return Kt||(Kt=1,(function(b,T){(function(l){b.exports=l()})(function(){return(function l(E,u,i){function n(p,v){if(!u[p]){if(!E[p]){var _=typeof Tt=="function"&&Tt;if(!v&&_)return _(p,!0);if(e)return e(p,!0);var w=new Error("Cannot find module '"+p+"'");throw w.code="MODULE_NOT_FOUND",w}var s=u[p]={exports:{}};E[p][0].call(s.exports,function(m){var a=E[p][1][m];return n(a||m)},s,s.exports,l,E,u,i)}return u[p].exports}for(var e=typeof Tt=="function"&&Tt,o=0;o<i.length;o++)n(i[o]);return n})({1:[function(l,E,u){var i=l("./utils"),n=l("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u.encode=function(o){for(var p,v,_,w,s,m,a,f=[],c=0,g=o.length,k=g,S=i.getTypeOf(o)!=="string";c<o.length;)k=g-c,_=S?(p=o[c++],v=c<g?o[c++]:0,c<g?o[c++]:0):(p=o.charCodeAt(c++),v=c<g?o.charCodeAt(c++):0,c<g?o.charCodeAt(c++):0),w=p>>2,s=(3&p)<<4|v>>4,m=1<k?(15&v)<<2|_>>6:64,a=2<k?63&_:64,f.push(e.charAt(w)+e.charAt(s)+e.charAt(m)+e.charAt(a));return f.join("")},u.decode=function(o){var p,v,_,w,s,m,a=0,f=0,c="data:";if(o.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var g,k=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===e.charAt(64)&&k--,o.charAt(o.length-2)===e.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=n.uint8array?new Uint8Array(0|k):new Array(0|k);a<o.length;)p=e.indexOf(o.charAt(a++))<<2|(w=e.indexOf(o.charAt(a++)))>>4,v=(15&w)<<4|(s=e.indexOf(o.charAt(a++)))>>2,_=(3&s)<<6|(m=e.indexOf(o.charAt(a++))),g[f++]=p,s!==64&&(g[f++]=v),m!==64&&(g[f++]=_);return g}},{"./support":30,"./utils":32}],2:[function(l,E,u){var i=l("./external"),n=l("./stream/DataWorker"),e=l("./stream/Crc32Probe"),o=l("./stream/DataLengthProbe");function p(v,_,w,s,m){this.compressedSize=v,this.uncompressedSize=_,this.crc32=w,this.compression=s,this.compressedContent=m}p.prototype={getContentWorker:function(){var v=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),_=this;return v.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(v,_,w){return v.pipe(new e).pipe(new o("uncompressedSize")).pipe(_.compressWorker(w)).pipe(new o("compressedSize")).withStreamInfo("compression",_)},E.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(l,E,u){var i=l("./stream/GenericWorker");u.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},u.DEFLATE=l("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(l,E,u){var i=l("./utils"),n=(function(){for(var e,o=[],p=0;p<256;p++){e=p;for(var v=0;v<8;v++)e=1&e?3988292384^e>>>1:e>>>1;o[p]=e}return o})();E.exports=function(e,o){return e!==void 0&&e.length?i.getTypeOf(e)!=="string"?(function(p,v,_,w){var s=n,m=w+_;p^=-1;for(var a=w;a<m;a++)p=p>>>8^s[255&(p^v[a])];return-1^p})(0|o,e,e.length,0):(function(p,v,_,w){var s=n,m=w+_;p^=-1;for(var a=w;a<m;a++)p=p>>>8^s[255&(p^v.charCodeAt(a))];return-1^p})(0|o,e,e.length,0):0}},{"./utils":32}],5:[function(l,E,u){u.base64=!1,u.binary=!1,u.dir=!1,u.createFolders=!0,u.date=null,u.compression=null,u.compressionOptions=null,u.comment=null,u.unixPermissions=null,u.dosPermissions=null},{}],6:[function(l,E,u){var i=null;i=typeof Promise<"u"?Promise:l("lie"),E.exports={Promise:i}},{lie:37}],7:[function(l,E,u){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",n=l("pako"),e=l("./utils"),o=l("./stream/GenericWorker"),p=i?"uint8array":"array";function v(_,w){o.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=w,this.meta={}}u.magic="\b\0",e.inherits(v,o),v.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(p,_.data),!1)},v.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(w){_.push({data:w,meta:_.meta})}},u.compressWorker=function(_){return new v("Deflate",_)},u.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(l,E,u){function i(s,m){var a,f="";for(a=0;a<m;a++)f+=String.fromCharCode(255&s),s>>>=8;return f}function n(s,m,a,f,c,g){var k,S,I=s.file,U=s.compression,R=g!==p.utf8encode,M=e.transformTo("string",g(I.name)),O=e.transformTo("string",p.utf8encode(I.name)),$=I.comment,V=e.transformTo("string",g($)),y=e.transformTo("string",p.utf8encode($)),D=O.length!==I.name.length,r=y.length!==$.length,P="",Q="",j="",tt=I.dir,W=I.date,J={crc32:0,compressedSize:0,uncompressedSize:0};m&&!a||(J.crc32=s.crc32,J.compressedSize=s.compressedSize,J.uncompressedSize=s.uncompressedSize);var C=0;m&&(C|=8),R||!D&&!r||(C|=2048);var z=0,q=0;tt&&(z|=16),c==="UNIX"?(q=798,z|=(function(K,st){var dt=K;return K||(dt=st?16893:33204),(65535&dt)<<16})(I.unixPermissions,tt)):(q=20,z|=(function(K){return 63&(K||0)})(I.dosPermissions)),k=W.getUTCHours(),k<<=6,k|=W.getUTCMinutes(),k<<=5,k|=W.getUTCSeconds()/2,S=W.getUTCFullYear()-1980,S<<=4,S|=W.getUTCMonth()+1,S<<=5,S|=W.getUTCDate(),D&&(Q=i(1,1)+i(v(M),4)+O,P+="up"+i(Q.length,2)+Q),r&&(j=i(1,1)+i(v(V),4)+y,P+="uc"+i(j.length,2)+j);var Y="";return Y+=`
\0`,Y+=i(C,2),Y+=U.magic,Y+=i(k,2),Y+=i(S,2),Y+=i(J.crc32,4),Y+=i(J.compressedSize,4),Y+=i(J.uncompressedSize,4),Y+=i(M.length,2),Y+=i(P.length,2),{fileRecord:_.LOCAL_FILE_HEADER+Y+M+P,dirRecord:_.CENTRAL_FILE_HEADER+i(q,2)+Y+i(V.length,2)+"\0\0\0\0"+i(z,4)+i(f,4)+M+P+V}}var e=l("../utils"),o=l("../stream/GenericWorker"),p=l("../utf8"),v=l("../crc32"),_=l("../signature");function w(s,m,a,f){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=a,this.encodeFileName=f,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(w,o),w.prototype.push=function(s){var m=s.meta.percent||0,a=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,o.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:a?(m+100*(a-f-1))/a:100}}))},w.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var m=this.streamFiles&&!s.file.dir;if(m){var a=n(s,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(s){this.accumulate=!1;var m=this.streamFiles&&!s.file.dir,a=n(s,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),m)this.push({data:(function(f){return _.DATA_DESCRIPTOR+i(f.crc32,4)+i(f.compressedSize,4)+i(f.uncompressedSize,4)})(s),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var s=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var a=this.bytesWritten-s,f=(function(c,g,k,S,I){var U=e.transformTo("string",I(S));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(c,2)+i(c,2)+i(g,4)+i(k,4)+i(U.length,2)+U})(this.dirRecords.length,a,s,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(s){this._sources.push(s);var m=this;return s.on("data",function(a){m.processChunk(a)}),s.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),s.on("error",function(a){m.error(a)}),this},w.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(s){var m=this._sources;if(!o.prototype.error.call(this,s))return!1;for(var a=0;a<m.length;a++)try{m[a].error(s)}catch{}return!0},w.prototype.lock=function(){o.prototype.lock.call(this);for(var s=this._sources,m=0;m<s.length;m++)s[m].lock()},E.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(l,E,u){var i=l("../compressions"),n=l("./ZipFileWorker");u.generateWorker=function(e,o,p){var v=new n(o.streamFiles,p,o.platform,o.encodeFileName),_=0;try{e.forEach(function(w,s){_++;var m=(function(g,k){var S=g||k,I=i[S];if(!I)throw new Error(S+" is not a valid compression method !");return I})(s.options.compression,o.compression),a=s.options.compressionOptions||o.compressionOptions||{},f=s.dir,c=s.date;s._compressWorker(m,a).withStreamInfo("file",{name:w,dir:f,date:c,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(v)}),v.entriesCount=_}catch(w){v.error(w)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(l,E,u){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var n=new i;for(var e in this)typeof this[e]!="function"&&(n[e]=this[e]);return n}}(i.prototype=l("./object")).loadAsync=l("./load"),i.support=l("./support"),i.defaults=l("./defaults"),i.version="3.10.1",i.loadAsync=function(n,e){return new i().loadAsync(n,e)},i.external=l("./external"),E.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(l,E,u){var i=l("./utils"),n=l("./external"),e=l("./utf8"),o=l("./zipEntries"),p=l("./stream/Crc32Probe"),v=l("./nodejsUtils");function _(w){return new n.Promise(function(s,m){var a=w.decompressed.getContentWorker().pipe(new p);a.on("error",function(f){m(f)}).on("end",function(){a.streamInfo.crc32!==w.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}E.exports=function(w,s){var m=this;return s=i.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),v.isNode&&v.isStream(w)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",w,!0,s.optimizedBinaryString,s.base64).then(function(a){var f=new o(s);return f.load(a),f}).then(function(a){var f=[n.Promise.resolve(a)],c=a.files;if(s.checkCRC32)for(var g=0;g<c.length;g++)f.push(_(c[g]));return n.Promise.all(f)}).then(function(a){for(var f=a.shift(),c=f.files,g=0;g<c.length;g++){var k=c[g],S=k.fileNameStr,I=i.resolve(k.fileNameStr);m.file(I,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:s.createFolders}),k.dir||(m.file(I).unsafeOriginalName=S)}return f.zipComment.length&&(m.comment=f.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(l,E,u){var i=l("../utils"),n=l("../stream/GenericWorker");function e(o,p){n.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(p)}i.inherits(e,n),e.prototype._bindStream=function(o){var p=this;(this._stream=o).pause(),o.on("data",function(v){p.push({data:v,meta:{percent:0}})}).on("error",function(v){p.isPaused?this.generatedError=v:p.error(v)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},e.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},E.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(l,E,u){var i=l("readable-stream").Readable;function n(e,o,p){i.call(this,o),this._helper=e;var v=this;e.on("data",function(_,w){v.push(_)||v._helper.pause(),p&&p(w)}).on("error",function(_){v.emit("error",_)}).on("end",function(){v.push(null)})}l("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},E.exports=n},{"../utils":32,"readable-stream":16}],14:[function(l,E,u){E.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,n);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,n)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var n=new Buffer(i);return n.fill(0),n},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(l,E,u){function i(I,U,R){var M,O=e.getTypeOf(U),$=e.extend(R||{},v);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(I=c(I)),$.createFolders&&(M=f(I))&&g.call(this,M,!0);var V=O==="string"&&$.binary===!1&&$.base64===!1;R&&R.binary!==void 0||($.binary=!V),(U instanceof _&&U.uncompressedSize===0||$.dir||!U||U.length===0)&&($.base64=!1,$.binary=!0,U="",$.compression="STORE",O="string");var y=null;y=U instanceof _||U instanceof o?U:m.isNode&&m.isStream(U)?new a(I,U):e.prepareContent(I,U,$.binary,$.optimizedBinaryString,$.base64);var D=new w(I,y,$);this.files[I]=D}var n=l("./utf8"),e=l("./utils"),o=l("./stream/GenericWorker"),p=l("./stream/StreamHelper"),v=l("./defaults"),_=l("./compressedObject"),w=l("./zipObject"),s=l("./generate"),m=l("./nodejsUtils"),a=l("./nodejs/NodejsStreamInputAdapter"),f=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var U=I.lastIndexOf("/");return 0<U?I.substring(0,U):""},c=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},g=function(I,U){return U=U!==void 0?U:v.createFolders,I=c(I),this.files[I]||i.call(this,I,null,{dir:!0,createFolders:U}),this.files[I]};function k(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var U,R,M;for(U in this.files)M=this.files[U],(R=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&I(R,M)},filter:function(I){var U=[];return this.forEach(function(R,M){I(R,M)&&U.push(M)}),U},file:function(I,U,R){if(arguments.length!==1)return I=this.root+I,i.call(this,I,U,R),this;if(k(I)){var M=I;return this.filter(function($,V){return!V.dir&&M.test($)})}var O=this.files[this.root+I];return O&&!O.dir?O:null},folder:function(I){if(!I)return this;if(k(I))return this.filter(function(O,$){return $.dir&&I.test(O)});var U=this.root+I,R=g.call(this,U),M=this.clone();return M.root=R.name,M},remove:function(I){I=this.root+I;var U=this.files[I];if(U||(I.slice(-1)!=="/"&&(I+="/"),U=this.files[I]),U&&!U.dir)delete this.files[I];else for(var R=this.filter(function(O,$){return $.name.slice(0,I.length)===I}),M=0;M<R.length;M++)delete this.files[R[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var U,R={};try{if((R=e.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");e.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var M=R.comment||this.comment||"";U=s.generateWorker(this,R,M)}catch(O){(U=new o("error")).error(O)}return new p(U,R.type||"string",R.mimeType)},generateAsync:function(I,U){return this.generateInternalStream(I).accumulate(U)},generateNodeStream:function(I,U){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(U)}};E.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(l,E,u){E.exports=l("stream")},{stream:void 0}],17:[function(l,E,u){var i=l("./DataReader");function n(e){i.call(this,e);for(var o=0;o<this.data.length;o++)e[o]=255&e[o]}l("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var o=e.charCodeAt(0),p=e.charCodeAt(1),v=e.charCodeAt(2),_=e.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===o&&this.data[w+1]===p&&this.data[w+2]===v&&this.data[w+3]===_)return w-this.zero;return-1},n.prototype.readAndCheckSignature=function(e){var o=e.charCodeAt(0),p=e.charCodeAt(1),v=e.charCodeAt(2),_=e.charCodeAt(3),w=this.readData(4);return o===w[0]&&p===w[1]&&v===w[2]&&_===w[3]},n.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},E.exports=n},{"../utils":32,"./DataReader":18}],18:[function(l,E,u){var i=l("../utils");function n(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var o,p=0;for(this.checkOffset(e),o=this.index+e-1;o>=this.index;o--)p=(p<<8)+this.byteAt(o);return this.index+=e,p},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},E.exports=n},{"../utils":32}],19:[function(l,E,u){var i=l("./Uint8ArrayReader");function n(e){i.call(this,e)}l("../utils").inherits(n,i),n.prototype.readData=function(e){this.checkOffset(e);var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},E.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(l,E,u){var i=l("./DataReader");function n(e){i.call(this,e)}l("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},n.prototype.readData=function(e){this.checkOffset(e);var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},E.exports=n},{"../utils":32,"./DataReader":18}],21:[function(l,E,u){var i=l("./ArrayReader");function n(e){i.call(this,e)}l("../utils").inherits(n,i),n.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},E.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(l,E,u){var i=l("../utils"),n=l("../support"),e=l("./ArrayReader"),o=l("./StringReader"),p=l("./NodeBufferReader"),v=l("./Uint8ArrayReader");E.exports=function(_){var w=i.getTypeOf(_);return i.checkSupport(w),w!=="string"||n.uint8array?w==="nodebuffer"?new p(_):n.uint8array?new v(i.transformTo("uint8array",_)):new e(i.transformTo("array",_)):new o(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(l,E,u){u.LOCAL_FILE_HEADER="PK",u.CENTRAL_FILE_HEADER="PK",u.CENTRAL_DIRECTORY_END="PK",u.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",u.ZIP64_CENTRAL_DIRECTORY_END="PK",u.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(l,E,u){var i=l("./GenericWorker"),n=l("../utils");function e(o){i.call(this,"ConvertWorker to "+o),this.destType=o}n.inherits(e,i),e.prototype.processChunk=function(o){this.push({data:n.transformTo(this.destType,o.data),meta:o.meta})},E.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(l,E,u){var i=l("./GenericWorker"),n=l("../crc32");function e(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}l("../utils").inherits(e,i),e.prototype.processChunk=function(o){this.streamInfo.crc32=n(o.data,this.streamInfo.crc32||0),this.push(o)},E.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(l,E,u){var i=l("../utils"),n=l("./GenericWorker");function e(o){n.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}i.inherits(e,n),e.prototype.processChunk=function(o){if(o){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+o.data.length}n.prototype.processChunk.call(this,o)},E.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(l,E,u){var i=l("../utils"),n=l("./GenericWorker");function e(o){n.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(v){p.dataIsReady=!0,p.data=v,p.max=v&&v.length||0,p.type=i.getTypeOf(v),p.isPaused||p._tickAndRepeat()},function(v){p.error(v)})}i.inherits(e,n),e.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,p);break;case"uint8array":o=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":o=this.data.slice(this.index,p)}return this.index=p,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},E.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(l,E,u){function i(n){this.name=n||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(n){this.emit("data",n)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(n){this.emit("error",n)}return!0},error:function(n){return!this.isFinished&&(this.isPaused?this.generatedError=n:(this.isFinished=!0,this.emit("error",n),this.previous&&this.previous.error(n),this.cleanUp()),!0)},on:function(n,e){return this._listeners[n].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(n,e){if(this._listeners[n])for(var o=0;o<this._listeners[n].length;o++)this._listeners[n][o].call(this,e)},pipe:function(n){return n.registerPrevious(this)},registerPrevious:function(n){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=n.streamInfo,this.mergeStreamInfo(),this.previous=n;var e=this;return n.on("data",function(o){e.processChunk(o)}),n.on("end",function(){e.end()}),n.on("error",function(o){e.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var n=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),n=!0),this.previous&&this.previous.resume(),!n},flush:function(){},processChunk:function(n){this.push(n)},withStreamInfo:function(n,e){return this.extraStreamInfo[n]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var n in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,n)&&(this.streamInfo[n]=this.extraStreamInfo[n])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var n="Worker "+this.name;return this.previous?this.previous+" -> "+n:n}},E.exports=i},{}],29:[function(l,E,u){var i=l("../utils"),n=l("./ConvertWorker"),e=l("./GenericWorker"),o=l("../base64"),p=l("../support"),v=l("../external"),_=null;if(p.nodestream)try{_=l("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(m,a){return new v.Promise(function(f,c){var g=[],k=m._internalType,S=m._outputType,I=m._mimeType;m.on("data",function(U,R){g.push(U),a&&a(R)}).on("error",function(U){g=[],c(U)}).on("end",function(){try{var U=(function(R,M,O){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",M),O);case"base64":return o.encode(M);default:return i.transformTo(R,M)}})(S,(function(R,M){var O,$=0,V=null,y=0;for(O=0;O<M.length;O++)y+=M[O].length;switch(R){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(V=new Uint8Array(y),O=0;O<M.length;O++)V.set(M[O],$),$+=M[O].length;return V;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+R+"'")}})(k,g),I);f(U)}catch(R){c(R)}g=[]}).resume()})}function s(m,a,f){var c=a;switch(a){case"blob":case"arraybuffer":c="uint8array";break;case"base64":c="string"}try{this._internalType=c,this._outputType=a,this._mimeType=f,i.checkSupport(c),this._worker=m.pipe(new n(c)),m.lock()}catch(g){this._worker=new e("error"),this._worker.error(g)}}s.prototype={accumulate:function(m){return w(this,m)},on:function(m,a){var f=this;return m==="data"?this._worker.on(m,function(c){a.call(f,c.data,c.meta)}):this._worker.on(m,function(){i.delay(a,arguments,f)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},m)}},E.exports=s},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(l,E,u){if(u.base64=!0,u.array=!0,u.string=!0,u.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",u.nodebuffer=typeof Buffer<"u",u.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")u.blob=!1;else{var i=new ArrayBuffer(0);try{u.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),u.blob=n.getBlob("application/zip").size===0}catch{u.blob=!1}}}try{u.nodestream=!!l("readable-stream").Readable}catch{u.nodestream=!1}},{"readable-stream":16}],31:[function(l,E,u){for(var i=l("./utils"),n=l("./support"),e=l("./nodejsUtils"),o=l("./stream/GenericWorker"),p=new Array(256),v=0;v<256;v++)p[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;p[254]=p[254]=1;function _(){o.call(this,"utf-8 decode"),this.leftOver=null}function w(){o.call(this,"utf-8 encode")}u.utf8encode=function(s){return n.nodebuffer?e.newBufferFrom(s,"utf-8"):(function(m){var a,f,c,g,k,S=m.length,I=0;for(g=0;g<S;g++)(64512&(f=m.charCodeAt(g)))==55296&&g+1<S&&(64512&(c=m.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(c-56320),g++),I+=f<128?1:f<2048?2:f<65536?3:4;for(a=n.uint8array?new Uint8Array(I):new Array(I),g=k=0;k<I;g++)(64512&(f=m.charCodeAt(g)))==55296&&g+1<S&&(64512&(c=m.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(c-56320),g++),f<128?a[k++]=f:(f<2048?a[k++]=192|f>>>6:(f<65536?a[k++]=224|f>>>12:(a[k++]=240|f>>>18,a[k++]=128|f>>>12&63),a[k++]=128|f>>>6&63),a[k++]=128|63&f);return a})(s)},u.utf8decode=function(s){return n.nodebuffer?i.transformTo("nodebuffer",s).toString("utf-8"):(function(m){var a,f,c,g,k=m.length,S=new Array(2*k);for(a=f=0;a<k;)if((c=m[a++])<128)S[f++]=c;else if(4<(g=p[c]))S[f++]=65533,a+=g-1;else{for(c&=g===2?31:g===3?15:7;1<g&&a<k;)c=c<<6|63&m[a++],g--;1<g?S[f++]=65533:c<65536?S[f++]=c:(c-=65536,S[f++]=55296|c>>10&1023,S[f++]=56320|1023&c)}return S.length!==f&&(S.subarray?S=S.subarray(0,f):S.length=f),i.applyFromCharCode(S)})(s=i.transformTo(n.uint8array?"uint8array":"array",s))},i.inherits(_,o),_.prototype.processChunk=function(s){var m=i.transformTo(n.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var a=m;(m=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),m.set(a,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var f=(function(g,k){var S;for((k=k||g.length)>g.length&&(k=g.length),S=k-1;0<=S&&(192&g[S])==128;)S--;return S<0||S===0?k:S+p[g[S]]>k?S:k})(m),c=m;f!==m.length&&(n.uint8array?(c=m.subarray(0,f),this.leftOver=m.subarray(f,m.length)):(c=m.slice(0,f),this.leftOver=m.slice(f,m.length))),this.push({data:u.utf8decode(c),meta:s.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:u.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},u.Utf8DecodeWorker=_,i.inherits(w,o),w.prototype.processChunk=function(s){this.push({data:u.utf8encode(s.data),meta:s.meta})},u.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(l,E,u){var i=l("./support"),n=l("./base64"),e=l("./nodejsUtils"),o=l("./external");function p(a){return a}function v(a,f){for(var c=0;c<a.length;++c)f[c]=255&a.charCodeAt(c);return f}l("setimmediate"),u.newBlob=function(a,f){u.checkSupport("blob");try{return new Blob([a],{type:f})}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return c.append(a),c.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(a,f,c){var g=[],k=0,S=a.length;if(S<=c)return String.fromCharCode.apply(null,a);for(;k<S;)f==="array"||f==="nodebuffer"?g.push(String.fromCharCode.apply(null,a.slice(k,Math.min(k+c,S)))):g.push(String.fromCharCode.apply(null,a.subarray(k,Math.min(k+c,S)))),k+=c;return g.join("")},stringifyByChar:function(a){for(var f="",c=0;c<a.length;c++)f+=String.fromCharCode(a[c]);return f},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}})()}};function w(a){var f=65536,c=u.getTypeOf(a),g=!0;if(c==="uint8array"?g=_.applyCanBeUsed.uint8array:c==="nodebuffer"&&(g=_.applyCanBeUsed.nodebuffer),g)for(;1<f;)try{return _.stringifyByChunk(a,c,f)}catch{f=Math.floor(f/2)}return _.stringifyByChar(a)}function s(a,f){for(var c=0;c<a.length;c++)f[c]=a[c];return f}u.applyFromCharCode=w;var m={};m.string={string:p,array:function(a){return v(a,new Array(a.length))},arraybuffer:function(a){return m.string.uint8array(a).buffer},uint8array:function(a){return v(a,new Uint8Array(a.length))},nodebuffer:function(a){return v(a,e.allocBuffer(a.length))}},m.array={string:w,array:p,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return e.newBufferFrom(a)}},m.arraybuffer={string:function(a){return w(new Uint8Array(a))},array:function(a){return s(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:p,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return e.newBufferFrom(new Uint8Array(a))}},m.uint8array={string:w,array:function(a){return s(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:p,nodebuffer:function(a){return e.newBufferFrom(a)}},m.nodebuffer={string:w,array:function(a){return s(a,new Array(a.length))},arraybuffer:function(a){return m.nodebuffer.uint8array(a).buffer},uint8array:function(a){return s(a,new Uint8Array(a.length))},nodebuffer:p},u.transformTo=function(a,f){if(f=f||"",!a)return f;u.checkSupport(a);var c=u.getTypeOf(f);return m[c][a](f)},u.resolve=function(a){for(var f=a.split("/"),c=[],g=0;g<f.length;g++){var k=f[g];k==="."||k===""&&g!==0&&g!==f.length-1||(k===".."?c.pop():c.push(k))}return c.join("/")},u.getTypeOf=function(a){return typeof a=="string"?"string":Object.prototype.toString.call(a)==="[object Array]"?"array":i.nodebuffer&&e.isBuffer(a)?"nodebuffer":i.uint8array&&a instanceof Uint8Array?"uint8array":i.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(a){if(!i[a.toLowerCase()])throw new Error(a+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(a){var f,c,g="";for(c=0;c<(a||"").length;c++)g+="\\x"+((f=a.charCodeAt(c))<16?"0":"")+f.toString(16).toUpperCase();return g},u.delay=function(a,f,c){setImmediate(function(){a.apply(c||null,f||[])})},u.inherits=function(a,f){function c(){}c.prototype=f.prototype,a.prototype=new c},u.extend=function(){var a,f,c={};for(a=0;a<arguments.length;a++)for(f in arguments[a])Object.prototype.hasOwnProperty.call(arguments[a],f)&&c[f]===void 0&&(c[f]=arguments[a][f]);return c},u.prepareContent=function(a,f,c,g,k){return o.Promise.resolve(f).then(function(S){return i.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new o.Promise(function(I,U){var R=new FileReader;R.onload=function(M){I(M.target.result)},R.onerror=function(M){U(M.target.error)},R.readAsArrayBuffer(S)}):S}).then(function(S){var I=u.getTypeOf(S);return I?(I==="arraybuffer"?S=u.transformTo("uint8array",S):I==="string"&&(k?S=n.decode(S):c&&g!==!0&&(S=(function(U){return v(U,i.uint8array?new Uint8Array(U.length):new Array(U.length))})(S))),S):o.Promise.reject(new Error("Can't read the data of '"+a+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(l,E,u){var i=l("./reader/readerFor"),n=l("./utils"),e=l("./signature"),o=l("./zipEntry"),p=l("./support");function v(_){this.files=[],this.loadOptions=_}v.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(w)+", expected "+n.pretty(_)+")")}},isSignature:function(_,w){var s=this.reader.index;this.reader.setIndex(_);var m=this.reader.readString(4)===w;return this.reader.setIndex(s),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),w=p.uint8array?"uint8array":"array",s=n.transformTo(w,_);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,w,s,m=this.zip64EndOfCentralSize-44;0<m;)_=this.reader.readInt(2),w=this.reader.readInt(4),s=this.reader.readData(w),this.zip64ExtensibleData[_]={id:_,length:w,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,w;for(_=0;_<this.files.length;_++)w=this.files[_],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(_=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var w=_;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var m=w-s;if(0<m)this.isSignature(w,e.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(_){this.reader=i(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},E.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(l,E,u){var i=l("./reader/readerFor"),n=l("./utils"),e=l("./compressedObject"),o=l("./crc32"),p=l("./utf8"),v=l("./compressions"),_=l("./support");function w(s,m){this.options=s,this.loadOptions=m}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var m,a;if(s.skip(22),this.fileNameLength=s.readInt(2),a=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(a),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(f){for(var c in v)if(Object.prototype.hasOwnProperty.call(v,c)&&v[c].magic===f)return v[c];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,m,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var m=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(m),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var s=i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=s.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=s.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=s.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=s.readInt(4))}},readExtraFields:function(s){var m,a,f,c=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<c;)m=s.readInt(2),a=s.readInt(2),f=s.readData(a),this.extraFields[m]={id:m,length:a,value:f};s.setIndex(c)},handleUTF8:function(){var s=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var a=n.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(a)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var c=n.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var m=i(s.value);return m.readInt(1)!==1||o(this.fileName)!==m.readInt(4)?null:p.utf8decode(m.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var m=i(s.value);return m.readInt(1)!==1||o(this.fileComment)!==m.readInt(4)?null:p.utf8decode(m.readData(s.length-5))}return null}},E.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(l,E,u){function i(m,a,f){this.name=m,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=a,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var n=l("./stream/StreamHelper"),e=l("./stream/DataWorker"),o=l("./utf8"),p=l("./compressedObject"),v=l("./stream/GenericWorker");i.prototype={internalStream:function(m){var a=null,f="string";try{if(!m)throw new Error("No output type specified.");var c=(f=m.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),a=this._decompressWorker();var g=!this._dataBinary;g&&!c&&(a=a.pipe(new o.Utf8EncodeWorker)),!g&&c&&(a=a.pipe(new o.Utf8DecodeWorker))}catch(k){(a=new v("error")).error(k)}return new n(a,f,"")},async:function(m,a){return this.internalStream(m).accumulate(a)},nodeStream:function(m,a){return this.internalStream(m||"nodebuffer").toNodejsStream(a)},_compressWorker:function(m,a){if(this._data instanceof p&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new o.Utf8EncodeWorker)),p.createWorkerFrom(f,m,a)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof v?this._data:new e(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<_.length;s++)i.prototype[_[s]]=w;E.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(l,E,u){(function(i){var n,e,o=i.MutationObserver||i.WebKitMutationObserver;if(o){var p=0,v=new o(m),_=i.document.createTextNode("");v.observe(_,{characterData:!0}),n=function(){_.data=p=++p%2}}else if(i.setImmediate||i.MessageChannel===void 0)n="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var a=i.document.createElement("script");a.onreadystatechange=function(){m(),a.onreadystatechange=null,a.parentNode.removeChild(a),a=null},i.document.documentElement.appendChild(a)}:function(){setTimeout(m,0)};else{var w=new i.MessageChannel;w.port1.onmessage=m,n=function(){w.port2.postMessage(0)}}var s=[];function m(){var a,f;e=!0;for(var c=s.length;c;){for(f=s,s=[],a=-1;++a<c;)f[a]();c=s.length}e=!1}E.exports=function(a){s.push(a)!==1||e||n()}}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(l,E,u){var i=l("immediate");function n(){}var e={},o=["REJECTED"],p=["FULFILLED"],v=["PENDING"];function _(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,c!==n&&a(this,c)}function w(c,g,k){this.promise=c,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function s(c,g,k){i(function(){var S;try{S=g(k)}catch(I){return e.reject(c,I)}S===c?e.reject(c,new TypeError("Cannot resolve promise with itself")):e.resolve(c,S)})}function m(c){var g=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof g=="function")return function(){g.apply(c,arguments)}}function a(c,g){var k=!1;function S(R){k||(k=!0,e.reject(c,R))}function I(R){k||(k=!0,e.resolve(c,R))}var U=f(function(){g(I,S)});U.status==="error"&&S(U.value)}function f(c,g){var k={};try{k.value=c(g),k.status="success"}catch(S){k.status="error",k.value=S}return k}(E.exports=_).prototype.finally=function(c){if(typeof c!="function")return this;var g=this.constructor;return this.then(function(k){return g.resolve(c()).then(function(){return k})},function(k){return g.resolve(c()).then(function(){throw k})})},_.prototype.catch=function(c){return this.then(null,c)},_.prototype.then=function(c,g){if(typeof c!="function"&&this.state===p||typeof g!="function"&&this.state===o)return this;var k=new this.constructor(n);return this.state!==v?s(k,this.state===p?c:g,this.outcome):this.queue.push(new w(k,c,g)),k},w.prototype.callFulfilled=function(c){e.resolve(this.promise,c)},w.prototype.otherCallFulfilled=function(c){s(this.promise,this.onFulfilled,c)},w.prototype.callRejected=function(c){e.reject(this.promise,c)},w.prototype.otherCallRejected=function(c){s(this.promise,this.onRejected,c)},e.resolve=function(c,g){var k=f(m,g);if(k.status==="error")return e.reject(c,k.value);var S=k.value;if(S)a(c,S);else{c.state=p,c.outcome=g;for(var I=-1,U=c.queue.length;++I<U;)c.queue[I].callFulfilled(g)}return c},e.reject=function(c,g){c.state=o,c.outcome=g;for(var k=-1,S=c.queue.length;++k<S;)c.queue[k].callRejected(g);return c},_.resolve=function(c){return c instanceof this?c:e.resolve(new this(n),c)},_.reject=function(c){var g=new this(n);return e.reject(g,c)},_.all=function(c){var g=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=c.length,S=!1;if(!k)return this.resolve([]);for(var I=new Array(k),U=0,R=-1,M=new this(n);++R<k;)O(c[R],R);return M;function O($,V){g.resolve($).then(function(y){I[V]=y,++U!==k||S||(S=!0,e.resolve(M,I))},function(y){S||(S=!0,e.reject(M,y))})}},_.race=function(c){var g=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=c.length,S=!1;if(!k)return this.resolve([]);for(var I=-1,U=new this(n);++I<k;)R=c[I],g.resolve(R).then(function(M){S||(S=!0,e.resolve(U,M))},function(M){S||(S=!0,e.reject(U,M))});var R;return U}},{immediate:36}],38:[function(l,E,u){var i={};(0,l("./lib/utils/common").assign)(i,l("./lib/deflate"),l("./lib/inflate"),l("./lib/zlib/constants")),E.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(l,E,u){var i=l("./zlib/deflate"),n=l("./utils/common"),e=l("./utils/strings"),o=l("./zlib/messages"),p=l("./zlib/zstream"),v=Object.prototype.toString,_=0,w=-1,s=0,m=8;function a(c){if(!(this instanceof a))return new a(c);this.options=n.assign({level:w,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},c||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var k=i.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(k!==_)throw new Error(o[k]);if(g.header&&i.deflateSetHeader(this.strm,g.header),g.dictionary){var S;if(S=typeof g.dictionary=="string"?e.string2buf(g.dictionary):v.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(k=i.deflateSetDictionary(this.strm,S))!==_)throw new Error(o[k]);this._dict_set=!0}}function f(c,g){var k=new a(g);if(k.push(c,!0),k.err)throw k.msg||o[k.err];return k.result}a.prototype.push=function(c,g){var k,S,I=this.strm,U=this.options.chunkSize;if(this.ended)return!1;S=g===~~g?g:g===!0?4:0,typeof c=="string"?I.input=e.string2buf(c):v.call(c)==="[object ArrayBuffer]"?I.input=new Uint8Array(c):I.input=c,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new n.Buf8(U),I.next_out=0,I.avail_out=U),(k=i.deflate(I,S))!==1&&k!==_)return this.onEnd(k),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(n.shrinkBuf(I.output,I.next_out))):this.onData(n.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&k!==1);return S===4?(k=i.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===_):S!==2||(this.onEnd(_),!(I.avail_out=0))},a.prototype.onData=function(c){this.chunks.push(c)},a.prototype.onEnd=function(c){c===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},u.Deflate=a,u.deflate=f,u.deflateRaw=function(c,g){return(g=g||{}).raw=!0,f(c,g)},u.gzip=function(c,g){return(g=g||{}).gzip=!0,f(c,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(l,E,u){var i=l("./zlib/inflate"),n=l("./utils/common"),e=l("./utils/strings"),o=l("./zlib/constants"),p=l("./zlib/messages"),v=l("./zlib/zstream"),_=l("./zlib/gzheader"),w=Object.prototype.toString;function s(a){if(!(this instanceof s))return new s(a);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},a||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||a&&a.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&(15&f.windowBits)==0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var c=i.inflateInit2(this.strm,f.windowBits);if(c!==o.Z_OK)throw new Error(p[c]);this.header=new _,i.inflateGetHeader(this.strm,this.header)}function m(a,f){var c=new s(f);if(c.push(a,!0),c.err)throw c.msg||p[c.err];return c.result}s.prototype.push=function(a,f){var c,g,k,S,I,U,R=this.strm,M=this.options.chunkSize,O=this.options.dictionary,$=!1;if(this.ended)return!1;g=f===~~f?f:f===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof a=="string"?R.input=e.binstring2buf(a):w.call(a)==="[object ArrayBuffer]"?R.input=new Uint8Array(a):R.input=a,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new n.Buf8(M),R.next_out=0,R.avail_out=M),(c=i.inflate(R,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&O&&(U=typeof O=="string"?e.string2buf(O):w.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,c=i.inflateSetDictionary(this.strm,U)),c===o.Z_BUF_ERROR&&$===!0&&(c=o.Z_OK,$=!1),c!==o.Z_STREAM_END&&c!==o.Z_OK)return this.onEnd(c),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&c!==o.Z_STREAM_END&&(R.avail_in!==0||g!==o.Z_FINISH&&g!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=e.utf8border(R.output,R.next_out),S=R.next_out-k,I=e.buf2string(R.output,k),R.next_out=S,R.avail_out=M-S,S&&n.arraySet(R.output,R.output,k,S,0),this.onData(I)):this.onData(n.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&($=!0)}while((0<R.avail_in||R.avail_out===0)&&c!==o.Z_STREAM_END);return c===o.Z_STREAM_END&&(g=o.Z_FINISH),g===o.Z_FINISH?(c=i.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===o.Z_OK):g!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(R.avail_out=0))},s.prototype.onData=function(a){this.chunks.push(a)},s.prototype.onEnd=function(a){a===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},u.Inflate=s,u.inflate=m,u.inflateRaw=function(a,f){return(f=f||{}).raw=!0,m(a,f)},u.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(l,E,u){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";u.assign=function(o){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var v=p.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var _ in v)v.hasOwnProperty(_)&&(o[_]=v[_])}}return o},u.shrinkBuf=function(o,p){return o.length===p?o:o.subarray?o.subarray(0,p):(o.length=p,o)};var n={arraySet:function(o,p,v,_,w){if(p.subarray&&o.subarray)o.set(p.subarray(v,v+_),w);else for(var s=0;s<_;s++)o[w+s]=p[v+s]},flattenChunks:function(o){var p,v,_,w,s,m;for(p=_=0,v=o.length;p<v;p++)_+=o[p].length;for(m=new Uint8Array(_),p=w=0,v=o.length;p<v;p++)s=o[p],m.set(s,w),w+=s.length;return m}},e={arraySet:function(o,p,v,_,w){for(var s=0;s<_;s++)o[w+s]=p[v+s]},flattenChunks:function(o){return[].concat.apply([],o)}};u.setTyped=function(o){o?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,n)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,e))},u.setTyped(i)},{}],42:[function(l,E,u){var i=l("./common"),n=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var o=new i.Buf8(256),p=0;p<256;p++)o[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function v(_,w){if(w<65537&&(_.subarray&&e||!_.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(_,w));for(var s="",m=0;m<w;m++)s+=String.fromCharCode(_[m]);return s}o[254]=o[254]=1,u.string2buf=function(_){var w,s,m,a,f,c=_.length,g=0;for(a=0;a<c;a++)(64512&(s=_.charCodeAt(a)))==55296&&a+1<c&&(64512&(m=_.charCodeAt(a+1)))==56320&&(s=65536+(s-55296<<10)+(m-56320),a++),g+=s<128?1:s<2048?2:s<65536?3:4;for(w=new i.Buf8(g),a=f=0;f<g;a++)(64512&(s=_.charCodeAt(a)))==55296&&a+1<c&&(64512&(m=_.charCodeAt(a+1)))==56320&&(s=65536+(s-55296<<10)+(m-56320),a++),s<128?w[f++]=s:(s<2048?w[f++]=192|s>>>6:(s<65536?w[f++]=224|s>>>12:(w[f++]=240|s>>>18,w[f++]=128|s>>>12&63),w[f++]=128|s>>>6&63),w[f++]=128|63&s);return w},u.buf2binstring=function(_){return v(_,_.length)},u.binstring2buf=function(_){for(var w=new i.Buf8(_.length),s=0,m=w.length;s<m;s++)w[s]=_.charCodeAt(s);return w},u.buf2string=function(_,w){var s,m,a,f,c=w||_.length,g=new Array(2*c);for(s=m=0;s<c;)if((a=_[s++])<128)g[m++]=a;else if(4<(f=o[a]))g[m++]=65533,s+=f-1;else{for(a&=f===2?31:f===3?15:7;1<f&&s<c;)a=a<<6|63&_[s++],f--;1<f?g[m++]=65533:a<65536?g[m++]=a:(a-=65536,g[m++]=55296|a>>10&1023,g[m++]=56320|1023&a)}return v(g,m)},u.utf8border=function(_,w){var s;for((w=w||_.length)>_.length&&(w=_.length),s=w-1;0<=s&&(192&_[s])==128;)s--;return s<0||s===0?w:s+o[_[s]]>w?s:w}},{"./common":41}],43:[function(l,E,u){E.exports=function(i,n,e,o){for(var p=65535&i|0,v=i>>>16&65535|0,_=0;e!==0;){for(e-=_=2e3<e?2e3:e;v=v+(p=p+n[o++]|0)|0,--_;);p%=65521,v%=65521}return p|v<<16|0}},{}],44:[function(l,E,u){E.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(l,E,u){var i=(function(){for(var n,e=[],o=0;o<256;o++){n=o;for(var p=0;p<8;p++)n=1&n?3988292384^n>>>1:n>>>1;e[o]=n}return e})();E.exports=function(n,e,o,p){var v=i,_=p+o;n^=-1;for(var w=p;w<_;w++)n=n>>>8^v[255&(n^e[w])];return-1^n}},{}],46:[function(l,E,u){var i,n=l("../utils/common"),e=l("./trees"),o=l("./adler32"),p=l("./crc32"),v=l("./messages"),_=0,w=4,s=0,m=-2,a=-1,f=4,c=2,g=8,k=9,S=286,I=30,U=19,R=2*S+1,M=15,O=3,$=258,V=$+O+1,y=42,D=113,r=1,P=2,Q=3,j=4;function tt(t,L){return t.msg=v[L],L}function W(t){return(t<<1)-(4<t?9:0)}function J(t){for(var L=t.length;0<=--L;)t[L]=0}function C(t){var L=t.state,B=L.pending;B>t.avail_out&&(B=t.avail_out),B!==0&&(n.arraySet(t.output,L.pending_buf,L.pending_out,B,t.next_out),t.next_out+=B,L.pending_out+=B,t.total_out+=B,t.avail_out-=B,L.pending-=B,L.pending===0&&(L.pending_out=0))}function z(t,L){e._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,L),t.block_start=t.strstart,C(t.strm)}function q(t,L){t.pending_buf[t.pending++]=L}function Y(t,L){t.pending_buf[t.pending++]=L>>>8&255,t.pending_buf[t.pending++]=255&L}function K(t,L){var B,h,d=t.max_chain_length,x=t.strstart,F=t.prev_length,N=t.nice_match,A=t.strstart>t.w_size-V?t.strstart-(t.w_size-V):0,Z=t.window,G=t.w_mask,H=t.prev,X=t.strstart+$,it=Z[x+F-1],rt=Z[x+F];t.prev_length>=t.good_match&&(d>>=2),N>t.lookahead&&(N=t.lookahead);do if(Z[(B=L)+F]===rt&&Z[B+F-1]===it&&Z[B]===Z[x]&&Z[++B]===Z[x+1]){x+=2,B++;do;while(Z[++x]===Z[++B]&&Z[++x]===Z[++B]&&Z[++x]===Z[++B]&&Z[++x]===Z[++B]&&Z[++x]===Z[++B]&&Z[++x]===Z[++B]&&Z[++x]===Z[++B]&&Z[++x]===Z[++B]&&x<X);if(h=$-(X-x),x=X-$,F<h){if(t.match_start=L,N<=(F=h))break;it=Z[x+F-1],rt=Z[x+F]}}while((L=H[L&G])>A&&--d!=0);return F<=t.lookahead?F:t.lookahead}function st(t){var L,B,h,d,x,F,N,A,Z,G,H=t.w_size;do{if(d=t.window_size-t.lookahead-t.strstart,t.strstart>=H+(H-V)){for(n.arraySet(t.window,t.window,H,H,0),t.match_start-=H,t.strstart-=H,t.block_start-=H,L=B=t.hash_size;h=t.head[--L],t.head[L]=H<=h?h-H:0,--B;);for(L=B=H;h=t.prev[--L],t.prev[L]=H<=h?h-H:0,--B;);d+=H}if(t.strm.avail_in===0)break;if(F=t.strm,N=t.window,A=t.strstart+t.lookahead,Z=d,G=void 0,G=F.avail_in,Z<G&&(G=Z),B=G===0?0:(F.avail_in-=G,n.arraySet(N,F.input,F.next_in,G,A),F.state.wrap===1?F.adler=o(F.adler,N,G,A):F.state.wrap===2&&(F.adler=p(F.adler,N,G,A)),F.next_in+=G,F.total_in+=G,G),t.lookahead+=B,t.lookahead+t.insert>=O)for(x=t.strstart-t.insert,t.ins_h=t.window[x],t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+O-1])&t.hash_mask,t.prev[x&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=x,x++,t.insert--,!(t.lookahead+t.insert<O)););}while(t.lookahead<V&&t.strm.avail_in!==0)}function dt(t,L){for(var B,h;;){if(t.lookahead<V){if(st(t),t.lookahead<V&&L===_)return r;if(t.lookahead===0)break}if(B=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),B!==0&&t.strstart-B<=t.w_size-V&&(t.match_length=K(t,B)),t.match_length>=O)if(h=e._tr_tally(t,t.strstart-t.match_start,t.match_length-O),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=O){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else h=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(h&&(z(t,!1),t.strm.avail_out===0))return r}return t.insert=t.strstart<O-1?t.strstart:O-1,L===w?(z(t,!0),t.strm.avail_out===0?Q:j):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?r:P}function et(t,L){for(var B,h,d;;){if(t.lookahead<V){if(st(t),t.lookahead<V&&L===_)return r;if(t.lookahead===0)break}if(B=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=O-1,B!==0&&t.prev_length<t.max_lazy_match&&t.strstart-B<=t.w_size-V&&(t.match_length=K(t,B),t.match_length<=5&&(t.strategy===1||t.match_length===O&&4096<t.strstart-t.match_start)&&(t.match_length=O-1)),t.prev_length>=O&&t.match_length<=t.prev_length){for(d=t.strstart+t.lookahead-O,h=e._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-O),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=d&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=O-1,t.strstart++,h&&(z(t,!1),t.strm.avail_out===0))return r}else if(t.match_available){if((h=e._tr_tally(t,0,t.window[t.strstart-1]))&&z(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return r}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(h=e._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<O-1?t.strstart:O-1,L===w?(z(t,!0),t.strm.avail_out===0?Q:j):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?r:P}function nt(t,L,B,h,d){this.good_length=t,this.max_lazy=L,this.nice_length=B,this.max_chain=h,this.func=d}function ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*R),this.dyn_dtree=new n.Buf16(2*(2*I+1)),this.bl_tree=new n.Buf16(2*(2*U+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(M+1),this.heap=new n.Buf16(2*S+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*S+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ot(t){var L;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=c,(L=t.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?y:D,t.adler=L.wrap===2?0:1,L.last_flush=_,e._tr_init(L),s):tt(t,m)}function pt(t){var L=ot(t);return L===s&&(function(B){B.window_size=2*B.w_size,J(B.head),B.max_lazy_match=i[B.level].max_lazy,B.good_match=i[B.level].good_length,B.nice_match=i[B.level].nice_length,B.max_chain_length=i[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=O-1,B.match_available=0,B.ins_h=0})(t.state),L}function ft(t,L,B,h,d,x){if(!t)return m;var F=1;if(L===a&&(L=6),h<0?(F=0,h=-h):15<h&&(F=2,h-=16),d<1||k<d||B!==g||h<8||15<h||L<0||9<L||x<0||f<x)return tt(t,m);h===8&&(h=9);var N=new ct;return(t.state=N).strm=t,N.wrap=F,N.gzhead=null,N.w_bits=h,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=d+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+O-1)/O),N.window=new n.Buf8(2*N.w_size),N.head=new n.Buf16(N.hash_size),N.prev=new n.Buf16(N.w_size),N.lit_bufsize=1<<d+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new n.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=L,N.strategy=x,N.method=B,pt(t)}i=[new nt(0,0,0,0,function(t,L){var B=65535;for(B>t.pending_buf_size-5&&(B=t.pending_buf_size-5);;){if(t.lookahead<=1){if(st(t),t.lookahead===0&&L===_)return r;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var h=t.block_start+B;if((t.strstart===0||t.strstart>=h)&&(t.lookahead=t.strstart-h,t.strstart=h,z(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-V&&(z(t,!1),t.strm.avail_out===0))return r}return t.insert=0,L===w?(z(t,!0),t.strm.avail_out===0?Q:j):(t.strstart>t.block_start&&(z(t,!1),t.strm.avail_out),r)}),new nt(4,4,8,4,dt),new nt(4,5,16,8,dt),new nt(4,6,32,32,dt),new nt(4,4,16,16,et),new nt(8,16,32,32,et),new nt(8,16,128,128,et),new nt(8,32,128,256,et),new nt(32,128,258,1024,et),new nt(32,258,258,4096,et)],u.deflateInit=function(t,L){return ft(t,L,g,15,8,0)},u.deflateInit2=ft,u.deflateReset=pt,u.deflateResetKeep=ot,u.deflateSetHeader=function(t,L){return t&&t.state?t.state.wrap!==2?m:(t.state.gzhead=L,s):m},u.deflate=function(t,L){var B,h,d,x;if(!t||!t.state||5<L||L<0)return t?tt(t,m):m;if(h=t.state,!t.output||!t.input&&t.avail_in!==0||h.status===666&&L!==w)return tt(t,t.avail_out===0?-5:m);if(h.strm=t,B=h.last_flush,h.last_flush=L,h.status===y)if(h.wrap===2)t.adler=0,q(h,31),q(h,139),q(h,8),h.gzhead?(q(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),q(h,255&h.gzhead.time),q(h,h.gzhead.time>>8&255),q(h,h.gzhead.time>>16&255),q(h,h.gzhead.time>>24&255),q(h,h.level===9?2:2<=h.strategy||h.level<2?4:0),q(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(q(h,255&h.gzhead.extra.length),q(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(t.adler=p(t.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=69):(q(h,0),q(h,0),q(h,0),q(h,0),q(h,0),q(h,h.level===9?2:2<=h.strategy||h.level<2?4:0),q(h,3),h.status=D);else{var F=g+(h.w_bits-8<<4)<<8;F|=(2<=h.strategy||h.level<2?0:h.level<6?1:h.level===6?2:3)<<6,h.strstart!==0&&(F|=32),F+=31-F%31,h.status=D,Y(h,F),h.strstart!==0&&(Y(h,t.adler>>>16),Y(h,65535&t.adler)),t.adler=1}if(h.status===69)if(h.gzhead.extra){for(d=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>d&&(t.adler=p(t.adler,h.pending_buf,h.pending-d,d)),C(t),d=h.pending,h.pending!==h.pending_buf_size));)q(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>d&&(t.adler=p(t.adler,h.pending_buf,h.pending-d,d)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=73)}else h.status=73;if(h.status===73)if(h.gzhead.name){d=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>d&&(t.adler=p(t.adler,h.pending_buf,h.pending-d,d)),C(t),d=h.pending,h.pending===h.pending_buf_size)){x=1;break}x=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,q(h,x)}while(x!==0);h.gzhead.hcrc&&h.pending>d&&(t.adler=p(t.adler,h.pending_buf,h.pending-d,d)),x===0&&(h.gzindex=0,h.status=91)}else h.status=91;if(h.status===91)if(h.gzhead.comment){d=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>d&&(t.adler=p(t.adler,h.pending_buf,h.pending-d,d)),C(t),d=h.pending,h.pending===h.pending_buf_size)){x=1;break}x=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,q(h,x)}while(x!==0);h.gzhead.hcrc&&h.pending>d&&(t.adler=p(t.adler,h.pending_buf,h.pending-d,d)),x===0&&(h.status=103)}else h.status=103;if(h.status===103&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&C(t),h.pending+2<=h.pending_buf_size&&(q(h,255&t.adler),q(h,t.adler>>8&255),t.adler=0,h.status=D)):h.status=D),h.pending!==0){if(C(t),t.avail_out===0)return h.last_flush=-1,s}else if(t.avail_in===0&&W(L)<=W(B)&&L!==w)return tt(t,-5);if(h.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||h.lookahead!==0||L!==_&&h.status!==666){var N=h.strategy===2?(function(A,Z){for(var G;;){if(A.lookahead===0&&(st(A),A.lookahead===0)){if(Z===_)return r;break}if(A.match_length=0,G=e._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++,G&&(z(A,!1),A.strm.avail_out===0))return r}return A.insert=0,Z===w?(z(A,!0),A.strm.avail_out===0?Q:j):A.last_lit&&(z(A,!1),A.strm.avail_out===0)?r:P})(h,L):h.strategy===3?(function(A,Z){for(var G,H,X,it,rt=A.window;;){if(A.lookahead<=$){if(st(A),A.lookahead<=$&&Z===_)return r;if(A.lookahead===0)break}if(A.match_length=0,A.lookahead>=O&&0<A.strstart&&(H=rt[X=A.strstart-1])===rt[++X]&&H===rt[++X]&&H===rt[++X]){it=A.strstart+$;do;while(H===rt[++X]&&H===rt[++X]&&H===rt[++X]&&H===rt[++X]&&H===rt[++X]&&H===rt[++X]&&H===rt[++X]&&H===rt[++X]&&X<it);A.match_length=$-(it-X),A.match_length>A.lookahead&&(A.match_length=A.lookahead)}if(A.match_length>=O?(G=e._tr_tally(A,1,A.match_length-O),A.lookahead-=A.match_length,A.strstart+=A.match_length,A.match_length=0):(G=e._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++),G&&(z(A,!1),A.strm.avail_out===0))return r}return A.insert=0,Z===w?(z(A,!0),A.strm.avail_out===0?Q:j):A.last_lit&&(z(A,!1),A.strm.avail_out===0)?r:P})(h,L):i[h.level].func(h,L);if(N!==Q&&N!==j||(h.status=666),N===r||N===Q)return t.avail_out===0&&(h.last_flush=-1),s;if(N===P&&(L===1?e._tr_align(h):L!==5&&(e._tr_stored_block(h,0,0,!1),L===3&&(J(h.head),h.lookahead===0&&(h.strstart=0,h.block_start=0,h.insert=0))),C(t),t.avail_out===0))return h.last_flush=-1,s}return L!==w?s:h.wrap<=0?1:(h.wrap===2?(q(h,255&t.adler),q(h,t.adler>>8&255),q(h,t.adler>>16&255),q(h,t.adler>>24&255),q(h,255&t.total_in),q(h,t.total_in>>8&255),q(h,t.total_in>>16&255),q(h,t.total_in>>24&255)):(Y(h,t.adler>>>16),Y(h,65535&t.adler)),C(t),0<h.wrap&&(h.wrap=-h.wrap),h.pending!==0?s:1)},u.deflateEnd=function(t){var L;return t&&t.state?(L=t.state.status)!==y&&L!==69&&L!==73&&L!==91&&L!==103&&L!==D&&L!==666?tt(t,m):(t.state=null,L===D?tt(t,-3):s):m},u.deflateSetDictionary=function(t,L){var B,h,d,x,F,N,A,Z,G=L.length;if(!t||!t.state||(x=(B=t.state).wrap)===2||x===1&&B.status!==y||B.lookahead)return m;for(x===1&&(t.adler=o(t.adler,L,G,0)),B.wrap=0,G>=B.w_size&&(x===0&&(J(B.head),B.strstart=0,B.block_start=0,B.insert=0),Z=new n.Buf8(B.w_size),n.arraySet(Z,L,G-B.w_size,B.w_size,0),L=Z,G=B.w_size),F=t.avail_in,N=t.next_in,A=t.input,t.avail_in=G,t.next_in=0,t.input=L,st(B);B.lookahead>=O;){for(h=B.strstart,d=B.lookahead-(O-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[h+O-1])&B.hash_mask,B.prev[h&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=h,h++,--d;);B.strstart=h,B.lookahead=O-1,st(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=O-1,B.match_available=0,t.next_in=N,t.input=A,t.avail_in=F,B.wrap=x,s},u.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(l,E,u){E.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(l,E,u){E.exports=function(i,n){var e,o,p,v,_,w,s,m,a,f,c,g,k,S,I,U,R,M,O,$,V,y,D,r,P;e=i.state,o=i.next_in,r=i.input,p=o+(i.avail_in-5),v=i.next_out,P=i.output,_=v-(n-i.avail_out),w=v+(i.avail_out-257),s=e.dmax,m=e.wsize,a=e.whave,f=e.wnext,c=e.window,g=e.hold,k=e.bits,S=e.lencode,I=e.distcode,U=(1<<e.lenbits)-1,R=(1<<e.distbits)-1;t:do{k<15&&(g+=r[o++]<<k,k+=8,g+=r[o++]<<k,k+=8),M=S[g&U];e:for(;;){if(g>>>=O=M>>>24,k-=O,(O=M>>>16&255)===0)P[v++]=65535&M;else{if(!(16&O)){if((64&O)==0){M=S[(65535&M)+(g&(1<<O)-1)];continue e}if(32&O){e.mode=12;break t}i.msg="invalid literal/length code",e.mode=30;break t}$=65535&M,(O&=15)&&(k<O&&(g+=r[o++]<<k,k+=8),$+=g&(1<<O)-1,g>>>=O,k-=O),k<15&&(g+=r[o++]<<k,k+=8,g+=r[o++]<<k,k+=8),M=I[g&R];r:for(;;){if(g>>>=O=M>>>24,k-=O,!(16&(O=M>>>16&255))){if((64&O)==0){M=I[(65535&M)+(g&(1<<O)-1)];continue r}i.msg="invalid distance code",e.mode=30;break t}if(V=65535&M,k<(O&=15)&&(g+=r[o++]<<k,(k+=8)<O&&(g+=r[o++]<<k,k+=8)),s<(V+=g&(1<<O)-1)){i.msg="invalid distance too far back",e.mode=30;break t}if(g>>>=O,k-=O,(O=v-_)<V){if(a<(O=V-O)&&e.sane){i.msg="invalid distance too far back",e.mode=30;break t}if(D=c,(y=0)===f){if(y+=m-O,O<$){for($-=O;P[v++]=c[y++],--O;);y=v-V,D=P}}else if(f<O){if(y+=m+f-O,(O-=f)<$){for($-=O;P[v++]=c[y++],--O;);if(y=0,f<$){for($-=O=f;P[v++]=c[y++],--O;);y=v-V,D=P}}}else if(y+=f-O,O<$){for($-=O;P[v++]=c[y++],--O;);y=v-V,D=P}for(;2<$;)P[v++]=D[y++],P[v++]=D[y++],P[v++]=D[y++],$-=3;$&&(P[v++]=D[y++],1<$&&(P[v++]=D[y++]))}else{for(y=v-V;P[v++]=P[y++],P[v++]=P[y++],P[v++]=P[y++],2<($-=3););$&&(P[v++]=P[y++],1<$&&(P[v++]=P[y++]))}break}}break}}while(o<p&&v<w);o-=$=k>>3,g&=(1<<(k-=$<<3))-1,i.next_in=o,i.next_out=v,i.avail_in=o<p?p-o+5:5-(o-p),i.avail_out=v<w?w-v+257:257-(v-w),e.hold=g,e.bits=k}},{}],49:[function(l,E,u){var i=l("../utils/common"),n=l("./adler32"),e=l("./crc32"),o=l("./inffast"),p=l("./inftrees"),v=1,_=2,w=0,s=-2,m=1,a=852,f=592;function c(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(y){var D;return y&&y.state?(D=y.state,y.total_in=y.total_out=D.total=0,y.msg="",D.wrap&&(y.adler=1&D.wrap),D.mode=m,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(a),D.distcode=D.distdyn=new i.Buf32(f),D.sane=1,D.back=-1,w):s}function S(y){var D;return y&&y.state?((D=y.state).wsize=0,D.whave=0,D.wnext=0,k(y)):s}function I(y,D){var r,P;return y&&y.state?(P=y.state,D<0?(r=0,D=-D):(r=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?s:(P.window!==null&&P.wbits!==D&&(P.window=null),P.wrap=r,P.wbits=D,S(y))):s}function U(y,D){var r,P;return y?(P=new g,(y.state=P).window=null,(r=I(y,D))!==w&&(y.state=null),r):s}var R,M,O=!0;function $(y){if(O){var D;for(R=new i.Buf32(512),M=new i.Buf32(32),D=0;D<144;)y.lens[D++]=8;for(;D<256;)y.lens[D++]=9;for(;D<280;)y.lens[D++]=7;for(;D<288;)y.lens[D++]=8;for(p(v,y.lens,0,288,R,0,y.work,{bits:9}),D=0;D<32;)y.lens[D++]=5;p(_,y.lens,0,32,M,0,y.work,{bits:5}),O=!1}y.lencode=R,y.lenbits=9,y.distcode=M,y.distbits=5}function V(y,D,r,P){var Q,j=y.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new i.Buf8(j.wsize)),P>=j.wsize?(i.arraySet(j.window,D,r-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(P<(Q=j.wsize-j.wnext)&&(Q=P),i.arraySet(j.window,D,r-P,Q,j.wnext),(P-=Q)?(i.arraySet(j.window,D,r-P,P,0),j.wnext=P,j.whave=j.wsize):(j.wnext+=Q,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=Q))),0}u.inflateReset=S,u.inflateReset2=I,u.inflateResetKeep=k,u.inflateInit=function(y){return U(y,15)},u.inflateInit2=U,u.inflate=function(y,D){var r,P,Q,j,tt,W,J,C,z,q,Y,K,st,dt,et,nt,ct,ot,pt,ft,t,L,B,h,d=0,x=new i.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return s;(r=y.state).mode===12&&(r.mode=13),tt=y.next_out,Q=y.output,J=y.avail_out,j=y.next_in,P=y.input,W=y.avail_in,C=r.hold,z=r.bits,q=W,Y=J,L=w;t:for(;;)switch(r.mode){case m:if(r.wrap===0){r.mode=13;break}for(;z<16;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if(2&r.wrap&&C===35615){x[r.check=0]=255&C,x[1]=C>>>8&255,r.check=e(r.check,x,2,0),z=C=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&C)<<8)+(C>>8))%31){y.msg="incorrect header check",r.mode=30;break}if((15&C)!=8){y.msg="unknown compression method",r.mode=30;break}if(z-=4,t=8+(15&(C>>>=4)),r.wbits===0)r.wbits=t;else if(t>r.wbits){y.msg="invalid window size",r.mode=30;break}r.dmax=1<<t,y.adler=r.check=1,r.mode=512&C?10:12,z=C=0;break;case 2:for(;z<16;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if(r.flags=C,(255&r.flags)!=8){y.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){y.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=C>>8&1),512&r.flags&&(x[0]=255&C,x[1]=C>>>8&255,r.check=e(r.check,x,2,0)),z=C=0,r.mode=3;case 3:for(;z<32;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}r.head&&(r.head.time=C),512&r.flags&&(x[0]=255&C,x[1]=C>>>8&255,x[2]=C>>>16&255,x[3]=C>>>24&255,r.check=e(r.check,x,4,0)),z=C=0,r.mode=4;case 4:for(;z<16;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}r.head&&(r.head.xflags=255&C,r.head.os=C>>8),512&r.flags&&(x[0]=255&C,x[1]=C>>>8&255,r.check=e(r.check,x,2,0)),z=C=0,r.mode=5;case 5:if(1024&r.flags){for(;z<16;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}r.length=C,r.head&&(r.head.extra_len=C),512&r.flags&&(x[0]=255&C,x[1]=C>>>8&255,r.check=e(r.check,x,2,0)),z=C=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(W<(K=r.length)&&(K=W),K&&(r.head&&(t=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,P,j,K,t)),512&r.flags&&(r.check=e(r.check,P,K,j)),W-=K,j+=K,r.length-=K),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(W===0)break t;for(K=0;t=P[j+K++],r.head&&t&&r.length<65536&&(r.head.name+=String.fromCharCode(t)),t&&K<W;);if(512&r.flags&&(r.check=e(r.check,P,K,j)),W-=K,j+=K,t)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(W===0)break t;for(K=0;t=P[j+K++],r.head&&t&&r.length<65536&&(r.head.comment+=String.fromCharCode(t)),t&&K<W;);if(512&r.flags&&(r.check=e(r.check,P,K,j)),W-=K,j+=K,t)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;z<16;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if(C!==(65535&r.check)){y.msg="header crc mismatch",r.mode=30;break}z=C=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),y.adler=r.check=0,r.mode=12;break;case 10:for(;z<32;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}y.adler=r.check=c(C),z=C=0,r.mode=11;case 11:if(r.havedict===0)return y.next_out=tt,y.avail_out=J,y.next_in=j,y.avail_in=W,r.hold=C,r.bits=z,2;y.adler=r.check=1,r.mode=12;case 12:if(D===5||D===6)break t;case 13:if(r.last){C>>>=7&z,z-=7&z,r.mode=27;break}for(;z<3;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}switch(r.last=1&C,z-=1,3&(C>>>=1)){case 0:r.mode=14;break;case 1:if($(r),r.mode=20,D!==6)break;C>>>=2,z-=2;break t;case 2:r.mode=17;break;case 3:y.msg="invalid block type",r.mode=30}C>>>=2,z-=2;break;case 14:for(C>>>=7&z,z-=7&z;z<32;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if((65535&C)!=(C>>>16^65535)){y.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&C,z=C=0,r.mode=15,D===6)break t;case 15:r.mode=16;case 16:if(K=r.length){if(W<K&&(K=W),J<K&&(K=J),K===0)break t;i.arraySet(Q,P,j,K,tt),W-=K,j+=K,J-=K,tt+=K,r.length-=K;break}r.mode=12;break;case 17:for(;z<14;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if(r.nlen=257+(31&C),C>>>=5,z-=5,r.ndist=1+(31&C),C>>>=5,z-=5,r.ncode=4+(15&C),C>>>=4,z-=4,286<r.nlen||30<r.ndist){y.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;z<3;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}r.lens[F[r.have++]]=7&C,C>>>=3,z-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,B={bits:r.lenbits},L=p(0,r.lens,0,19,r.lencode,0,r.work,B),r.lenbits=B.bits,L){y.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;nt=(d=r.lencode[C&(1<<r.lenbits)-1])>>>16&255,ct=65535&d,!((et=d>>>24)<=z);){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if(ct<16)C>>>=et,z-=et,r.lens[r.have++]=ct;else{if(ct===16){for(h=et+2;z<h;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if(C>>>=et,z-=et,r.have===0){y.msg="invalid bit length repeat",r.mode=30;break}t=r.lens[r.have-1],K=3+(3&C),C>>>=2,z-=2}else if(ct===17){for(h=et+3;z<h;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}z-=et,t=0,K=3+(7&(C>>>=et)),C>>>=3,z-=3}else{for(h=et+7;z<h;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}z-=et,t=0,K=11+(127&(C>>>=et)),C>>>=7,z-=7}if(r.have+K>r.nlen+r.ndist){y.msg="invalid bit length repeat",r.mode=30;break}for(;K--;)r.lens[r.have++]=t}}if(r.mode===30)break;if(r.lens[256]===0){y.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,B={bits:r.lenbits},L=p(v,r.lens,0,r.nlen,r.lencode,0,r.work,B),r.lenbits=B.bits,L){y.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,B={bits:r.distbits},L=p(_,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,B),r.distbits=B.bits,L){y.msg="invalid distances set",r.mode=30;break}if(r.mode=20,D===6)break t;case 20:r.mode=21;case 21:if(6<=W&&258<=J){y.next_out=tt,y.avail_out=J,y.next_in=j,y.avail_in=W,r.hold=C,r.bits=z,o(y,Y),tt=y.next_out,Q=y.output,J=y.avail_out,j=y.next_in,P=y.input,W=y.avail_in,C=r.hold,z=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;nt=(d=r.lencode[C&(1<<r.lenbits)-1])>>>16&255,ct=65535&d,!((et=d>>>24)<=z);){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if(nt&&(240&nt)==0){for(ot=et,pt=nt,ft=ct;nt=(d=r.lencode[ft+((C&(1<<ot+pt)-1)>>ot)])>>>16&255,ct=65535&d,!(ot+(et=d>>>24)<=z);){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}C>>>=ot,z-=ot,r.back+=ot}if(C>>>=et,z-=et,r.back+=et,r.length=ct,nt===0){r.mode=26;break}if(32&nt){r.back=-1,r.mode=12;break}if(64&nt){y.msg="invalid literal/length code",r.mode=30;break}r.extra=15&nt,r.mode=22;case 22:if(r.extra){for(h=r.extra;z<h;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}r.length+=C&(1<<r.extra)-1,C>>>=r.extra,z-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;nt=(d=r.distcode[C&(1<<r.distbits)-1])>>>16&255,ct=65535&d,!((et=d>>>24)<=z);){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if((240&nt)==0){for(ot=et,pt=nt,ft=ct;nt=(d=r.distcode[ft+((C&(1<<ot+pt)-1)>>ot)])>>>16&255,ct=65535&d,!(ot+(et=d>>>24)<=z);){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}C>>>=ot,z-=ot,r.back+=ot}if(C>>>=et,z-=et,r.back+=et,64&nt){y.msg="invalid distance code",r.mode=30;break}r.offset=ct,r.extra=15&nt,r.mode=24;case 24:if(r.extra){for(h=r.extra;z<h;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}r.offset+=C&(1<<r.extra)-1,C>>>=r.extra,z-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){y.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(J===0)break t;if(K=Y-J,r.offset>K){if((K=r.offset-K)>r.whave&&r.sane){y.msg="invalid distance too far back",r.mode=30;break}st=K>r.wnext?(K-=r.wnext,r.wsize-K):r.wnext-K,K>r.length&&(K=r.length),dt=r.window}else dt=Q,st=tt-r.offset,K=r.length;for(J<K&&(K=J),J-=K,r.length-=K;Q[tt++]=dt[st++],--K;);r.length===0&&(r.mode=21);break;case 26:if(J===0)break t;Q[tt++]=r.length,J--,r.mode=21;break;case 27:if(r.wrap){for(;z<32;){if(W===0)break t;W--,C|=P[j++]<<z,z+=8}if(Y-=J,y.total_out+=Y,r.total+=Y,Y&&(y.adler=r.check=r.flags?e(r.check,Q,Y,tt-Y):n(r.check,Q,Y,tt-Y)),Y=J,(r.flags?C:c(C))!==r.check){y.msg="incorrect data check",r.mode=30;break}z=C=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;z<32;){if(W===0)break t;W--,C+=P[j++]<<z,z+=8}if(C!==(4294967295&r.total)){y.msg="incorrect length check",r.mode=30;break}z=C=0}r.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return s}return y.next_out=tt,y.avail_out=J,y.next_in=j,y.avail_in=W,r.hold=C,r.bits=z,(r.wsize||Y!==y.avail_out&&r.mode<30&&(r.mode<27||D!==4))&&V(y,y.output,y.next_out,Y-y.avail_out)?(r.mode=31,-4):(q-=y.avail_in,Y-=y.avail_out,y.total_in+=q,y.total_out+=Y,r.total+=Y,r.wrap&&Y&&(y.adler=r.check=r.flags?e(r.check,Q,Y,y.next_out-Y):n(r.check,Q,Y,y.next_out-Y)),y.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(q==0&&Y===0||D===4)&&L===w&&(L=-5),L)},u.inflateEnd=function(y){if(!y||!y.state)return s;var D=y.state;return D.window&&(D.window=null),y.state=null,w},u.inflateGetHeader=function(y,D){var r;return y&&y.state?(2&(r=y.state).wrap)==0?s:((r.head=D).done=!1,w):s},u.inflateSetDictionary=function(y,D){var r,P=D.length;return y&&y.state?(r=y.state).wrap!==0&&r.mode!==11?s:r.mode===11&&n(1,D,P,0)!==r.check?-3:V(y,D,P,P)?(r.mode=31,-4):(r.havedict=1,w):s},u.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(l,E,u){var i=l("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];E.exports=function(v,_,w,s,m,a,f,c){var g,k,S,I,U,R,M,O,$,V=c.bits,y=0,D=0,r=0,P=0,Q=0,j=0,tt=0,W=0,J=0,C=0,z=null,q=0,Y=new i.Buf16(16),K=new i.Buf16(16),st=null,dt=0;for(y=0;y<=15;y++)Y[y]=0;for(D=0;D<s;D++)Y[_[w+D]]++;for(Q=V,P=15;1<=P&&Y[P]===0;P--);if(P<Q&&(Q=P),P===0)return m[a++]=20971520,m[a++]=20971520,c.bits=1,0;for(r=1;r<P&&Y[r]===0;r++);for(Q<r&&(Q=r),y=W=1;y<=15;y++)if(W<<=1,(W-=Y[y])<0)return-1;if(0<W&&(v===0||P!==1))return-1;for(K[1]=0,y=1;y<15;y++)K[y+1]=K[y]+Y[y];for(D=0;D<s;D++)_[w+D]!==0&&(f[K[_[w+D]]++]=D);if(R=v===0?(z=st=f,19):v===1?(z=n,q-=257,st=e,dt-=257,256):(z=o,st=p,-1),y=r,U=a,tt=D=C=0,S=-1,I=(J=1<<(j=Q))-1,v===1&&852<J||v===2&&592<J)return 1;for(;;){for(M=y-tt,$=f[D]<R?(O=0,f[D]):f[D]>R?(O=st[dt+f[D]],z[q+f[D]]):(O=96,0),g=1<<y-tt,r=k=1<<j;m[U+(C>>tt)+(k-=g)]=M<<24|O<<16|$|0,k!==0;);for(g=1<<y-1;C&g;)g>>=1;if(g!==0?(C&=g-1,C+=g):C=0,D++,--Y[y]==0){if(y===P)break;y=_[w+f[D]]}if(Q<y&&(C&I)!==S){for(tt===0&&(tt=Q),U+=r,W=1<<(j=y-tt);j+tt<P&&!((W-=Y[j+tt])<=0);)j++,W<<=1;if(J+=1<<j,v===1&&852<J||v===2&&592<J)return 1;m[S=C&I]=Q<<24|j<<16|U-a|0}}return C!==0&&(m[U+C]=y-tt<<24|64<<16|0),c.bits=Q,0}},{"../utils/common":41}],51:[function(l,E,u){E.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(l,E,u){var i=l("../utils/common"),n=0,e=1;function o(d){for(var x=d.length;0<=--x;)d[x]=0}var p=0,v=29,_=256,w=_+1+v,s=30,m=19,a=2*w+1,f=15,c=16,g=7,k=256,S=16,I=17,U=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(w+2));o(V);var y=new Array(2*s);o(y);var D=new Array(512);o(D);var r=new Array(256);o(r);var P=new Array(v);o(P);var Q,j,tt,W=new Array(s);function J(d,x,F,N,A){this.static_tree=d,this.extra_bits=x,this.extra_base=F,this.elems=N,this.max_length=A,this.has_stree=d&&d.length}function C(d,x){this.dyn_tree=d,this.max_code=0,this.stat_desc=x}function z(d){return d<256?D[d]:D[256+(d>>>7)]}function q(d,x){d.pending_buf[d.pending++]=255&x,d.pending_buf[d.pending++]=x>>>8&255}function Y(d,x,F){d.bi_valid>c-F?(d.bi_buf|=x<<d.bi_valid&65535,q(d,d.bi_buf),d.bi_buf=x>>c-d.bi_valid,d.bi_valid+=F-c):(d.bi_buf|=x<<d.bi_valid&65535,d.bi_valid+=F)}function K(d,x,F){Y(d,F[2*x],F[2*x+1])}function st(d,x){for(var F=0;F|=1&d,d>>>=1,F<<=1,0<--x;);return F>>>1}function dt(d,x,F){var N,A,Z=new Array(f+1),G=0;for(N=1;N<=f;N++)Z[N]=G=G+F[N-1]<<1;for(A=0;A<=x;A++){var H=d[2*A+1];H!==0&&(d[2*A]=st(Z[H]++,H))}}function et(d){var x;for(x=0;x<w;x++)d.dyn_ltree[2*x]=0;for(x=0;x<s;x++)d.dyn_dtree[2*x]=0;for(x=0;x<m;x++)d.bl_tree[2*x]=0;d.dyn_ltree[2*k]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function nt(d){8<d.bi_valid?q(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function ct(d,x,F,N){var A=2*x,Z=2*F;return d[A]<d[Z]||d[A]===d[Z]&&N[x]<=N[F]}function ot(d,x,F){for(var N=d.heap[F],A=F<<1;A<=d.heap_len&&(A<d.heap_len&&ct(x,d.heap[A+1],d.heap[A],d.depth)&&A++,!ct(x,N,d.heap[A],d.depth));)d.heap[F]=d.heap[A],F=A,A<<=1;d.heap[F]=N}function pt(d,x,F){var N,A,Z,G,H=0;if(d.last_lit!==0)for(;N=d.pending_buf[d.d_buf+2*H]<<8|d.pending_buf[d.d_buf+2*H+1],A=d.pending_buf[d.l_buf+H],H++,N===0?K(d,A,x):(K(d,(Z=r[A])+_+1,x),(G=R[Z])!==0&&Y(d,A-=P[Z],G),K(d,Z=z(--N),F),(G=M[Z])!==0&&Y(d,N-=W[Z],G)),H<d.last_lit;);K(d,k,x)}function ft(d,x){var F,N,A,Z=x.dyn_tree,G=x.stat_desc.static_tree,H=x.stat_desc.has_stree,X=x.stat_desc.elems,it=-1;for(d.heap_len=0,d.heap_max=a,F=0;F<X;F++)Z[2*F]!==0?(d.heap[++d.heap_len]=it=F,d.depth[F]=0):Z[2*F+1]=0;for(;d.heap_len<2;)Z[2*(A=d.heap[++d.heap_len]=it<2?++it:0)]=1,d.depth[A]=0,d.opt_len--,H&&(d.static_len-=G[2*A+1]);for(x.max_code=it,F=d.heap_len>>1;1<=F;F--)ot(d,Z,F);for(A=X;F=d.heap[1],d.heap[1]=d.heap[d.heap_len--],ot(d,Z,1),N=d.heap[1],d.heap[--d.heap_max]=F,d.heap[--d.heap_max]=N,Z[2*A]=Z[2*F]+Z[2*N],d.depth[A]=(d.depth[F]>=d.depth[N]?d.depth[F]:d.depth[N])+1,Z[2*F+1]=Z[2*N+1]=A,d.heap[1]=A++,ot(d,Z,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],(function(rt,ut){var It,mt,Et,lt,zt,Lt,gt=ut.dyn_tree,Wt=ut.max_code,te=ut.stat_desc.static_tree,ee=ut.stat_desc.has_stree,re=ut.stat_desc.extra_bits,Zt=ut.stat_desc.extra_base,St=ut.stat_desc.max_length,Ct=0;for(lt=0;lt<=f;lt++)rt.bl_count[lt]=0;for(gt[2*rt.heap[rt.heap_max]+1]=0,It=rt.heap_max+1;It<a;It++)St<(lt=gt[2*gt[2*(mt=rt.heap[It])+1]+1]+1)&&(lt=St,Ct++),gt[2*mt+1]=lt,Wt<mt||(rt.bl_count[lt]++,zt=0,Zt<=mt&&(zt=re[mt-Zt]),Lt=gt[2*mt],rt.opt_len+=Lt*(lt+zt),ee&&(rt.static_len+=Lt*(te[2*mt+1]+zt)));if(Ct!==0){do{for(lt=St-1;rt.bl_count[lt]===0;)lt--;rt.bl_count[lt]--,rt.bl_count[lt+1]+=2,rt.bl_count[St]--,Ct-=2}while(0<Ct);for(lt=St;lt!==0;lt--)for(mt=rt.bl_count[lt];mt!==0;)Wt<(Et=rt.heap[--It])||(gt[2*Et+1]!==lt&&(rt.opt_len+=(lt-gt[2*Et+1])*gt[2*Et],gt[2*Et+1]=lt),mt--)}})(d,x),dt(Z,it,d.bl_count)}function t(d,x,F){var N,A,Z=-1,G=x[1],H=0,X=7,it=4;for(G===0&&(X=138,it=3),x[2*(F+1)+1]=65535,N=0;N<=F;N++)A=G,G=x[2*(N+1)+1],++H<X&&A===G||(H<it?d.bl_tree[2*A]+=H:A!==0?(A!==Z&&d.bl_tree[2*A]++,d.bl_tree[2*S]++):H<=10?d.bl_tree[2*I]++:d.bl_tree[2*U]++,Z=A,it=(H=0)===G?(X=138,3):A===G?(X=6,3):(X=7,4))}function L(d,x,F){var N,A,Z=-1,G=x[1],H=0,X=7,it=4;for(G===0&&(X=138,it=3),N=0;N<=F;N++)if(A=G,G=x[2*(N+1)+1],!(++H<X&&A===G)){if(H<it)for(;K(d,A,d.bl_tree),--H!=0;);else A!==0?(A!==Z&&(K(d,A,d.bl_tree),H--),K(d,S,d.bl_tree),Y(d,H-3,2)):H<=10?(K(d,I,d.bl_tree),Y(d,H-3,3)):(K(d,U,d.bl_tree),Y(d,H-11,7));Z=A,it=(H=0)===G?(X=138,3):A===G?(X=6,3):(X=7,4)}}o(W);var B=!1;function h(d,x,F,N){Y(d,(p<<1)+(N?1:0),3),(function(A,Z,G,H){nt(A),q(A,G),q(A,~G),i.arraySet(A.pending_buf,A.window,Z,G,A.pending),A.pending+=G})(d,x,F)}u._tr_init=function(d){B||((function(){var x,F,N,A,Z,G=new Array(f+1);for(A=N=0;A<v-1;A++)for(P[A]=N,x=0;x<1<<R[A];x++)r[N++]=A;for(r[N-1]=A,A=Z=0;A<16;A++)for(W[A]=Z,x=0;x<1<<M[A];x++)D[Z++]=A;for(Z>>=7;A<s;A++)for(W[A]=Z<<7,x=0;x<1<<M[A]-7;x++)D[256+Z++]=A;for(F=0;F<=f;F++)G[F]=0;for(x=0;x<=143;)V[2*x+1]=8,x++,G[8]++;for(;x<=255;)V[2*x+1]=9,x++,G[9]++;for(;x<=279;)V[2*x+1]=7,x++,G[7]++;for(;x<=287;)V[2*x+1]=8,x++,G[8]++;for(dt(V,w+1,G),x=0;x<s;x++)y[2*x+1]=5,y[2*x]=st(x,5);Q=new J(V,R,_+1,w,f),j=new J(y,M,0,s,f),tt=new J(new Array(0),O,0,m,g)})(),B=!0),d.l_desc=new C(d.dyn_ltree,Q),d.d_desc=new C(d.dyn_dtree,j),d.bl_desc=new C(d.bl_tree,tt),d.bi_buf=0,d.bi_valid=0,et(d)},u._tr_stored_block=h,u._tr_flush_block=function(d,x,F,N){var A,Z,G=0;0<d.level?(d.strm.data_type===2&&(d.strm.data_type=(function(H){var X,it=4093624447;for(X=0;X<=31;X++,it>>>=1)if(1&it&&H.dyn_ltree[2*X]!==0)return n;if(H.dyn_ltree[18]!==0||H.dyn_ltree[20]!==0||H.dyn_ltree[26]!==0)return e;for(X=32;X<_;X++)if(H.dyn_ltree[2*X]!==0)return e;return n})(d)),ft(d,d.l_desc),ft(d,d.d_desc),G=(function(H){var X;for(t(H,H.dyn_ltree,H.l_desc.max_code),t(H,H.dyn_dtree,H.d_desc.max_code),ft(H,H.bl_desc),X=m-1;3<=X&&H.bl_tree[2*$[X]+1]===0;X--);return H.opt_len+=3*(X+1)+5+5+4,X})(d),A=d.opt_len+3+7>>>3,(Z=d.static_len+3+7>>>3)<=A&&(A=Z)):A=Z=F+5,F+4<=A&&x!==-1?h(d,x,F,N):d.strategy===4||Z===A?(Y(d,2+(N?1:0),3),pt(d,V,y)):(Y(d,4+(N?1:0),3),(function(H,X,it,rt){var ut;for(Y(H,X-257,5),Y(H,it-1,5),Y(H,rt-4,4),ut=0;ut<rt;ut++)Y(H,H.bl_tree[2*$[ut]+1],3);L(H,H.dyn_ltree,X-1),L(H,H.dyn_dtree,it-1)})(d,d.l_desc.max_code+1,d.d_desc.max_code+1,G+1),pt(d,d.dyn_ltree,d.dyn_dtree)),et(d),N&&nt(d)},u._tr_tally=function(d,x,F){return d.pending_buf[d.d_buf+2*d.last_lit]=x>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&x,d.pending_buf[d.l_buf+d.last_lit]=255&F,d.last_lit++,x===0?d.dyn_ltree[2*F]++:(d.matches++,x--,d.dyn_ltree[2*(r[F]+_+1)]++,d.dyn_dtree[2*z(x)]++),d.last_lit===d.lit_bufsize-1},u._tr_align=function(d){Y(d,2,3),K(d,k,V),(function(x){x.bi_valid===16?(q(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)})(d)}},{"../utils/common":41}],53:[function(l,E,u){E.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(l,E,u){(function(i){(function(n,e){if(!n.setImmediate){var o,p,v,_,w=1,s={},m=!1,a=n.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(n);f=f&&f.setTimeout?f:n,o={}.toString.call(n.process)==="[object process]"?function(S){process.nextTick(function(){g(S)})}:(function(){if(n.postMessage&&!n.importScripts){var S=!0,I=n.onmessage;return n.onmessage=function(){S=!1},n.postMessage("","*"),n.onmessage=I,S}})()?(_="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",k,!1):n.attachEvent("onmessage",k),function(S){n.postMessage(_+S,"*")}):n.MessageChannel?((v=new MessageChannel).port1.onmessage=function(S){g(S.data)},function(S){v.port2.postMessage(S)}):a&&"onreadystatechange"in a.createElement("script")?(p=a.documentElement,function(S){var I=a.createElement("script");I.onreadystatechange=function(){g(S),I.onreadystatechange=null,p.removeChild(I),I=null},p.appendChild(I)}):function(S){setTimeout(g,0,S)},f.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var I=new Array(arguments.length-1),U=0;U<I.length;U++)I[U]=arguments[U+1];var R={callback:S,args:I};return s[w]=R,o(w),w++},f.clearImmediate=c}function c(S){delete s[S]}function g(S){if(m)setTimeout(g,0,S);else{var I=s[S];if(I){m=!0;try{(function(U){var R=U.callback,M=U.args;switch(M.length){case 0:R();break;case 1:R(M[0]);break;case 2:R(M[0],M[1]);break;case 3:R(M[0],M[1],M[2]);break;default:R.apply(e,M)}})(I)}finally{c(S),m=!1}}}}function k(S){S.source===n&&typeof S.data=="string"&&S.data.indexOf(_)===0&&g(+S.data.slice(_.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ut)),Ut.exports}var fe=ue();const he=de(fe);console.log("æ­£åœ¨åŠ è½½ç½‘é¡µç‰ˆé€‚é…é€»è¾‘...");window.electronAPI===void 0&&(console.log("æ£€æµ‹åˆ° Web çŽ¯å¢ƒï¼Œæ³¨å…¥å…¼å®¹é€‚é…å™¨..."),document.body.classList.add("is-web"),window.electronAPI={getFilePath:b=>b.name,selectFolder:async()=>"browser-download",confirmOverwrite:async()=>!0,saveImage:async({bufferData:b,newFileName:T})=>{try{const E=await(await fetch(b)).blob();if("showSaveFilePicker"in window)try{const e=await(await window.showSaveFilePicker({suggestedName:T,types:[{description:"Image File",accept:{[E.type]:["."+T.split(".").pop()]}}]})).createWritable();return await e.write(E),await e.close(),{success:!0}}catch(n){if(n.name==="AbortError")return{success:!1,error:"ç”¨æˆ·å–æ¶ˆ"}}const u=window.URL.createObjectURL(E),i=document.createElement("a");return i.href=u,i.download=T,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(u),document.body.removeChild(i),{success:!0}}catch(l){return{success:!1,error:l.message}}},saveZip:async b=>{try{const T=new he;b.forEach(v=>{T.file(v.name,v.buffer)});const l=await T.generateAsync({type:"blob"}),E=window.URL.createObjectURL(l),u=document.createElement("a");u.href=E;const i=new Date,n=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0"),o=String(i.getDate()).padStart(2,"0"),p=`${n}-${e}-${o}`;return u.download=`AIç«å…‰åŽ‹ç¼©_${p}.zip`,document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(E),document.body.removeChild(u),{success:!0}}catch(T){return console.error("ZIP Error:",T),alert("æ‰“åŒ…ä¸‹è½½å¤±è´¥: "+T.message),{success:!1}}},convertRaw:async()=>"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"});
